!function(){var e={addonStrings:window.themeVariables.strings.addons.quickCompare};const h={addText:e.addonStrings.add,removeText:e.addonStrings.remove,localStorageName:"quickCompare"},f={addonContainer:".dbtfy-quick-compare-container",addButton:".dbtfy-quick-compare__add-button",addButtonText:".dbtfy-quick-compare__add-button-text",count:".dbtfy-quick-compare__count",bubbleIcon:".dbtfy-quick-compare__icon-bubble",modal:".dbtfy-quick-compare__modal",noItem:".dbtfy-quick-compare__no-item",tableWrapper:".dbtfy-quick-compare__table-wrapper",table:".dbtfy-quick-compare__table",stickyButton:".dbtfy-quick-compare__sticky-button",stickyButtonIcon:".dbtfy-quick-compare__sticky-button-icon",tableColumn:".dbtfy-quick-compare__table-column",tableColumnCell:".dbtfy-quick-compare__table-column-cell",removeButton:".dbtfy-quick-compare__item-remove-button"},q={enabledAddon:"dbtfy-quick-compare-enabled",inactiveButton:"btn--reveal-primary",activeButton:"btn--primary",buttonIcon:"dbtfy-quick-compare__icon"};function t(){var e=document.querySelectorAll(f.addonContainer);const t=document.querySelectorAll(f.bubbleIcon),r=document.querySelector(f.modal),o=document.querySelectorAll(f.noItem),n=document.querySelectorAll(f.tableWrapper),d=document.querySelectorAll(f.stickyButton),l=document.querySelectorAll(f.stickyButtonIcon);function i(e,t){let o=y();e?o?o.push(t):o=[t]:o=o.filter(e=>e!==t),o=JSON.stringify(o),e=o,localStorage.setItem(h.localStorageName,e),theme.helpers.loadComponents(["modal","loadingState","fetchProductMarkup"],()=>{c(),a(!1)})}function a(a){const e=y();e&&e.length?(p(o,!1),p(n,!0)):(p(o,!0),p(n,!1));var t=e.filter(e=>!!e);const c=new DOMParser;if(t.length)a&&(p(l,!1),theme.loadingState.init(d)),theme.FetchProductMarkup({template:"quick-compare",productHandles:t},t=>{var e=Object.keys(t).map(e=>{return c.parseFromString(t[e],"text/html").querySelector(f.tableColumn)}),o=r?.querySelectorAll(f.table+" tr"),o=(o&&o.forEach(e=>{e.querySelectorAll(f.tableColumnCell).forEach(e=>{e.remove()})}),e.length&&e.forEach(e=>{var t,o,a,c,r,n,d,l,i,u,s,m,p,b,y;e=e,(t=document.querySelector(f.table+" tbody"))&&(o=t.querySelector(".dbtfy-quick-compare__row--images"),a=t.querySelector(".dbtfy-quick-compare__row--title"),c=t.querySelector(".dbtfy-quick-compare__row--price"),r=t.querySelector(".dbtfy-quick-compare__row--type"),n=t.querySelector(".dbtfy-quick-compare__row--vendor"),d=t.querySelector(".dbtfy-quick-compare__row--collections"),l=t.querySelector(".dbtfy-quick-compare__row--tags"),t=t.querySelector(".dbtfy-quick-compare__row--description"),i=e&&e.querySelector(".dbtfy-quick-compare__table-column-cell--images"),u=e&&e.querySelector(".dbtfy-quick-compare__table-column-cell--title"),s=e&&e.querySelector(".dbtfy-quick-compare__table-column-cell--price"),m=e&&e.querySelector(".dbtfy-quick-compare__table-column-cell--type"),p=e&&e.querySelector(".dbtfy-quick-compare__table-column-cell--vendor"),b=e&&e.querySelector(".dbtfy-quick-compare__table-column-cell--collections"),y=e&&e.querySelector(".dbtfy-quick-compare__table-column-cell--tags"),e=e&&e.querySelector(".dbtfy-quick-compare__table-column-cell--description"),i&&o&&o.append(i),u&&a&&a.append(u),s&&c&&c.append(s),m&&r&&r.append(m),p&&n&&n.append(p),b&&d&&d.append(b),y&&l&&l.append(y),e)&&t&&t.append(e)}),theme.Modal.init(),document.dispatchEvent(new CustomEvent("theme:addon:quick-compare:loaded")),document.dispatchEvent(new CustomEvent("theme:cart:form-override:init")),document.dispatchEvent(new CustomEvent("theme:addon:custom-currencies:convert-prices")),a&&(theme.Modal.open(r),theme.loadingState.destroy(d),p(l,!0)),r?.querySelectorAll(".dbtfy-quick-compare__table-column-cell--images"));o&&o.forEach(e=>{var t=e;if(t){const a=t.querySelector(".dbtfy-quick-compare__slider");if(a){const c=t.querySelector(".dbtfy-quick-compare__thumbnails");t=t.querySelector(".dbtfy-quick-compare__image--featured");const r=t?+t.dataset.index:0,n={slidesToShow:4,slidesToScroll:1,dots:!1,arrows:!0,focusOnSelect:!0,swipeToSlide:!0,infinite:!1,speed:window.themeVariables.animation.speed,asNavFor:a,adaptiveHeight:!1},d={slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!0,focusOnSelect:!1,swipeToSlide:!1,infinite:!1,speed:window.themeVariables.animation.speed,adaptiveHeight:!0,asNavFor:c};theme.helpers.loadComponent("slider",()=>{theme.Slider.init({slider:c,options:n,events:{init:()=>{u(c)},afterChange:()=>{s()}}}),theme.Slider.init({slider:a,options:d,goToSlide:r,events:{init:()=>{u(a),theme.helpers.handleVideos()},afterChange:()=>{s()}}})})}}const o=e.querySelector(f.removeButton);o&&o.addEventListener("click",()=>{var e=o.dataset.productHandle;theme.loadingState.init(o),i(!1,e),document.querySelectorAll(f.addButton+`[data-product-handle="${e}"]`).forEach(e=>{e.classList.remove(q.activeButton),e.classList.add(q.inactiveButton),e.classList.contains(q.buttonIcon)||(e.querySelector(f.addButtonText).innerText=h.addText),e.setAttribute("aria-label",h.addText),e.setAttribute("title",h.addText)})})})});else{a&&theme.Modal.open(r);const e=y();void m(e,!1)}}function u(e){e&&(e.querySelectorAll("img[data-src]").forEach(e=>{var t=e.dataset.src,o=e.dataset.srcset;e.setAttribute("src",t),o&&e.setAttribute("srcset",o),e.removeAttribute("data-src"),e.removeAttribute("data-srcset")}),theme.helpers.loadComponent("imagesLazyloading",()=>{theme.imagesLazyLoading()}))}function s(){var e=r?.querySelector("lite-youtube, lite-vimeo, video");let t;if(e)switch(e.tagName){case"LITE-YOUTUBE":(t=e.querySelector("iframe"))&&t.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");break;case"LITE-VIMEO":(t=e.querySelector("iframe"))&&t.contentWindow.postMessage('{"method":"pause","value":"true"}',"*");break;case"VIDEO":e.pause()}}function c(){var e=y();e&&e.length?(e=m(e,!0),theme.FetchProductMarkup({template:"quick-compare",productHandles:e},e=>{b(Object.entries(e).reduce((e,[,t])=>t.includes("<!doctype html>")?e:e+1,0)),p(t,!0)})):(b(0),p(t,!1))}function m(e,t){e=e.filter(e=>!!e);return e&&e.length?e.forEach(e=>{t&&document.querySelectorAll(f.addButton+`[data-product-handle="${e}"]`).forEach(e=>{e.classList.add(q.activeButton),e.classList.remove(q.inactiveButton),e.classList.contains(q.buttonIcon)||(e.querySelector(f.addButtonText).innerText=h.removeText),e.setAttribute("aria-label",h.removeText),e.setAttribute("title",h.removeText)})}):document.querySelectorAll(f.addButton).forEach(e=>{e.classList.remove(q.activeButton),e.classList.add(q.inactiveButton),e.setAttribute("aria-label",h.addText),e.setAttribute("title",h.addText)}),e}function p(e,t){e.forEach(e=>{t?e.removeAttribute("hidden"):e.setAttribute("hidden","hidden")})}function b(t){document.querySelectorAll(f.count).forEach(e=>{e.innerHTML=t})}function y(){var e=localStorage.getItem(h.localStorageName);return e?JSON.parse(e):[]}e.forEach(e=>{e.removeAttribute("hidden")}),document.querySelectorAll(f.addButton).forEach(a=>{a.hasAttribute("data-has-click-event")||(a.addEventListener("click",()=>{var e=a.dataset.productHandle;const t=a.classList.contains(q.activeButton);var o=!t;e&&(document.querySelectorAll(f.addButton+`[data-product-handle="${e}"]`).forEach(e=>{t?(e.classList.remove(q.activeButton),e.classList.add(q.inactiveButton),e.setAttribute("aria-label",h.addText),e.setAttribute("title",h.addText),e.classList.contains(q.buttonIcon)||(e.querySelector(f.addButtonText).innerText=h.addText)):(e.classList.add(q.activeButton),e.classList.remove(q.inactiveButton),e.setAttribute("aria-label",h.removeText),e.setAttribute("title",h.removeText),e.classList.contains(q.buttonIcon)||(e.querySelector(f.addButtonText).innerText=h.removeText))}),i(o,e))}),a.setAttribute("data-has-click-event","true"))}),d.forEach(e=>{e.hasAttribute("has-click-event")||(e.addEventListener("click",function(){theme.helpers.loadComponents(["modal","loadingState","fetchProductMarkup"],()=>{a(!0)})}),e.setAttribute("has-click-event","true"))}),theme.helpers.loadComponents(["modal","loadingState","fetchProductMarkup"],()=>{c()})}document.body.classList.add(q.enabledAddon),t(),document.addEventListener("theme:section:product-recommendations:loaded",e=>{t()}),document.addEventListener("shopify:section:load",e=>{t()}),document.addEventListener("theme:addon:collection-filters:loaded",()=>{t()}),document.addEventListener("theme:addon:infinite-scroll:loaded",e=>{t()}),document.addEventListener("theme:addon:mega-menu:loaded",()=>{t()}),document.addEventListener("theme:addon:recently-viewed:loaded",()=>{t()})}();