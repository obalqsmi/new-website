!function(){var e={variables:window.themeVariables.variables};const l={addonSection:".dbtfy-recently-viewed__section",addonContainer:".js-recently-viewed-products",addonBarContainer:".js-recently-viewed-bar-products",triggerButton:".dbtfy-recently-viewed__trigger-button",tabPosition:".dbtfy-recently-viewed-bar__content",viewedContent:".dbtfy-recently-viewed-bar__products"},c={addonEnabled:"dbtfy-recently-viewed-enabled"};var t=document.querySelector(l.addonSection);if(t){const m=theme.helpers.safelyParseJson(t.dataset.sectionSettings);if(m){const h={...m,rootUrl:e.variables.routes.rootUrl},v=1<h.rootUrl.length?h.rootUrl:"";async function o(){const n=document.querySelector(l.addonContainer),t=document.querySelector(l.addonBarContainer);var e=document.querySelector(".template-product .product.section");const o=e?e.dataset.productHandle:"",r=u().filter(e=>e!==o).slice(0,h.productsLimit);var e=await async function(e){if(!e||!e.length)return"";e=e.map(e=>fetch(`${v}/products/${e}?view=recently-viewed&desktopGrid=${h.productsPerRowDesktop}&mobileGrid=`+h.productsPerRowMobile));return Promise.all(e).then(async e=>Promise.all(e.map(e=>e.text()))).then(e=>e)}(r),i=(i=e)&&i.length?i.map(e=>{return(new DOMParser).parseFromString(e,"text/html").querySelector(".dbtfy-recently-viewed-product .product-item")}):[];i.length&&n&&(i.forEach(e=>{var t;e&&(t=e.dataset.productId,n.querySelector(`.product-item[data-product-id='${t}']`)||n.insertAdjacentElement("beforeend",e))}),document.body.classList.add(c.addonEnabled),theme.helpers.loadComponent("imagesLazyloading",()=>{theme.imagesLazyLoading()}),i={name:"enquire",type:"js",src:themeVariables.files.vendors.js.enquire},theme.helpers.loadAsset(i).then(()=>{theme.helpers.loadComponent("slider",()=>{var e=n,t=m;if(t.enableSlider){const o={arrows:t.showArrows,dots:t.showDots,autoplay:t.enableAutoplay,autoplaySpeed:t.autoplaySpeed,slidesToShow:t.slidesToShow,slidesToScroll:1,swipeToSlide:!0,infinite:!0,speed:window.themeVariables.animation.speed,pauseOnHover:!1},i={...o,slidesToShow:t.slidesToShowMobile,centerMode:!0,focusOnSelect:!0,autoplay:!1,infinite:!0,adaptiveHeight:!0};enquire.register(window.themeVariables.breakpoints.md,{match:function(){t.slidesToShow<r.length?theme.Slider.init({slider:e,options:o}):(theme.Slider.destroy(e),e.classList.add("gy-4"))}}),enquire.register(window.themeVariables.breakpoints["md-max"],{match:function(){theme.Slider.init({slider:e,options:i})}})}})}));e=(i=e)&&i.length?i.map(e=>{return(new DOMParser).parseFromString(e,"text/html").querySelector(".dbtfy-recently-viewed-bar-product")}):[];if(e.length&&t){for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach(e=>{e&&t.insertAdjacentElement("beforeend",e)}),document.body.classList.add(c.addonEnabled),theme.helpers.loadComponent("imagesLazyloading",()=>{theme.imagesLazyLoading()})}(i=o)&&((e=u()).includes(i)||e.unshift(i),localStorage.setItem("recently-viewed-products",JSON.stringify(e))),document.dispatchEvent(new CustomEvent("theme:addon:recently-viewed:loaded")),document.dispatchEvent(new CustomEvent("theme:cart:form-override:init")),document.dispatchEvent(new CustomEvent("theme:addon:custom-currencies:convert-prices"));{const s=document.querySelector(l.tabPosition),a=document.querySelector(l.triggerButton),d=document.querySelector(l.viewedContent);"true"===localStorage.getItem("viewedContentsVisible")?(a.classList.add("active"),d.removeAttribute("hidden"),s.classList.contains("vertical")&&!s.classList.contains("horizontal")&&s.classList.remove("vertical")):(a.classList.remove("active"),d.setAttribute("hidden","hidden"),s.classList.contains("horizontal")||s.classList.add("vertical")),a&&d&&a.addEventListener("click",function(){a.classList.contains("active")?(a.classList.remove("active"),d.setAttribute("hidden","hidden"),localStorage.setItem("viewedContentsVisible","false"),s.classList.contains("horizontal")||s.classList.add("vertical")):(a.classList.add("active"),d.removeAttribute("hidden"),d.classList.add("active"),localStorage.setItem("viewedContentsVisible","true"),s.classList.contains("vertical")&&!s.classList.contains("horizontal")&&s.classList.remove("vertical"))})}}function u(){var e=localStorage.getItem("recently-viewed-products");return e?JSON.parse(e):[]}o(),document.addEventListener("shopify:section:load",()=>{o()})}}}();