!function(){const l={addonSection:".dbtfy-gift-wrap",form:".dbtfy-gift-wrap__form",checkbox:".dbtfy-gift-wrap__checkbox",message:".dbtfy-gift-wrap__message"};function t(){document.querySelectorAll(l.addonSection).forEach(e=>{var t=theme.helpers.safelyParseJson(e.dataset.sectionSettings);if(t){t=t.productId;const d=+(e.closest(".cart__form")?.querySelector(`.cart__row[data-product-id='${t}']`))?.dataset.line;var a=e;if(a){var r=a.querySelector(l.form);if(r){var o=document.createElement("form");for(o.setAttribute("method","post"),o.setAttribute("id","product_form_"+t),o.setAttribute("accept-charset","UTF-8"),o.setAttribute("enctype","multipart/form-data");r.firstElementChild;)o.insertAdjacentElement("beforeend",r.firstElementChild);r.insertAdjacentElement("afterbegin",o)}}const n=e.querySelector(l.checkbox);if(n){const c=e.querySelector("form");n.addEventListener("change",e=>{var t;i(!0),n.checked?(t=c,theme.ShopifyAPI.addItemFromForm({forms:t},e=>{theme.ajaxCart.update(()=>{i(!1)})},e=>{theme.ajaxCart.update(()=>{i(!1)})})):(t=d)?theme.ShopifyAPI.changeItem(t,0,()=>{theme.ajaxCart.update(()=>{i(!1)}),s("")}):i(!1)})}}});{const a=document.querySelectorAll(l.message),e=document.querySelector(l.message+":not(:placeholder-shown)"),t=e?.value;a.forEach(e=>{e.addEventListener("input",()=>{const t=e.value;a.forEach(e=>{e.value=t})}),e.addEventListener("change",()=>{s(e.value)}),t&&(e.value=t)})}function s(e){fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({attributes:{"Gift wrap":e}})})}function i(t){document.querySelectorAll(l.checkbox).forEach(e=>{t?(e.setAttribute("disabled","disabled"),e.parentElement.classList.add("disabled")):(e.removeAttribute("disabled"),e.parentElement.classList.remove("disabled"))})}}document.body.classList.add("dbtfy-gift-wrap-enabled"),theme.helpers.loadComponent("ajaxCart",()=>{t()}),document.addEventListener("theme:cart:loaded",e=>{theme.helpers.loadComponent("ajaxCart",()=>{t()})})}();