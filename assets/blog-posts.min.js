!function(){const e=".dbtfy-blog-grid",t=".blog-post-menu__filters-dropdown",r=".blog-post-menu__filters-dropdown-toggle",o="blog-post-menu-selected-filters",n=".blog-post-menu__sort-select",a="blog-post-menu-search",l='.blog-post-menu__filter-option input[type="checkbox"]',c="article";document.body.classList.add("dbtfy-blog-posts-enabled");const s=document.querySelector(e),d=document.querySelector(t),u=d?.querySelectorAll(l),i=d?.querySelector(r),m=document.getElementById(o),p=document.querySelector(n),y=document.getElementById(a),g="true"===s?.dataset.showTagsCount;if(s){const b=Array.from(s.querySelectorAll(c));function h(){var e,t;m&&d&&(e=Array.from(u).filter(e=>e.checked).map(e=>e.value),m.innerHTML="",0<e.length)&&(g&&((t=document.createElement("span")).classList.add("blog-post-menu__filter-count"),t.textContent=`${e.length} ${1<e.length?"filters":"filter"} applied`,m.appendChild(t)),e.forEach(t=>{var e=document.createElement("span");e.classList.add("blog-post-menu__selected-filter"),e.innerHTML=t+' <span class="blog-post-menu__remove-filter">&times;</span>',e.querySelector(".blog-post-menu__remove-filter").addEventListener("click",()=>{var e=document.querySelector(`input[type="checkbox"][value="${t}"]`);e&&(e.checked=!1),h(),f()}),m.appendChild(e)}))}function f(){const o=Array.from(u).filter(e=>e.checked).map(e=>e.value),n=y?y.value.toLowerCase().trim():"",t=b.filter(e=>{const t=e.dataset.tags?e.dataset.tags.split(","):[];var r=e.querySelector(".h3").textContent.toLowerCase(),e=e.querySelector(".card__body p")?e.querySelector(".card__body p").textContent.toLowerCase():"",r=!n||r.includes(n)||e.includes(n),e=0===o.length||o.every(e=>t.includes(e));return r&&e});if(b.forEach(e=>{e.style.display=t.includes(e)?"":"none"}),p){var e=t;const r=p.value,a=(e.sort((e,t)=>{switch(r){case"alphabetically_az":return e.querySelector(".h3").textContent.localeCompare(t.querySelector(".h3").textContent);case"alphabetically_za":return t.querySelector(".h3").textContent.localeCompare(e.querySelector(".h3").textContent);case"date_desc":return new Date(t.querySelector("time").getAttribute("datetime"))-new Date(e.querySelector("time").getAttribute("datetime"));case"date_asc":return new Date(e.querySelector("time").getAttribute("datetime"))-new Date(t.querySelector("time").getAttribute("datetime"));case"author":return(e.dataset.author||"").localeCompare(t.dataset.author||"");case"comments":return parseInt(t.dataset.commentCount||"0")-parseInt(e.dataset.commentCount||"0");default:return 0}}),document.createDocumentFragment());e.forEach(e=>{e.style.display="",a.appendChild(e)}),s.innerHTML="",s.appendChild(a)}}u?.forEach(e=>{e.addEventListener("change",()=>{h(),f()})}),i&&(i.addEventListener("click",e=>{e.stopPropagation(),d.classList.toggle("active")}),document.addEventListener("click",e=>{d.contains(e.target)||d.classList.remove("active")})),p&&p.addEventListener("change",()=>f()),y&&y.addEventListener("input",()=>f()),h(),f()}}();