!function(){var e={settings:window.themeVariables.settings,strings:window.themeVariables.strings};const w={months:e.strings.months,weekdays:e.strings.weekdays,timeZone:+e.settings.timeZone},$={addonSection:".dbtfy-delivery-time",item:".dbtfy-delivery-time__item",itemText:".dbtfy-delivery-time__item-text",itemTimeline:".dbtfy-delivery-time__timeline",itemCutoff:".dbtfy-delivery-time__item-cut-off",itemDispatched:".dbtfy-delivery-time__dispatched",addonContainer:".dbtfy-delivery-time-container",productJSON:"[data-product-json]"};function t(){theme.helpers.getUserLocationData().then(e=>{const c=e.country?.handle;e=document.querySelector($.addonSection);if(e){const r=e.querySelectorAll($.item);if(r.length){e=document.querySelectorAll(".product.section");const y={};if(e.forEach(e=>{var t=e.querySelector($.addonSection),e=e.querySelector($.productJSON);const a=e?JSON.parse(e.innerHTML):null;if(t&&t.remove(),a){const D=a.handle;r.forEach(e=>{const t=theme.helpers.safelyParseJson(e.dataset.blockSettings);t&&theme.Visibility.check(a,t,()=>{var r;r=D,o=e,y[r]?y[r].includes(o)||y[r].push(o):y[r]=[o],r=t,o=r.excludeDays,i=r.dispatchedDays,r=r.visualDateFormat;{var n=o,s=i,o=$.itemDispatched,i=r;const l={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},c=[];n=n.split(",").filter(e=>e).map(e=>e.trim().toLowerCase());for(const u in l)n.forEach(e=>{l[u].toLowerCase().includes(e)&&c.push(parseInt(u,10))});let e=new Date,t=0;for(;t<s;){var d=(e=new Date(e.getTime()+864e5)).getDay();c.includes(d)||t++}let a;"MM"===i?a=e.toLocaleDateString("en-US",{month:"long",day:"numeric"}):"DD"===i&&(a=e.toLocaleDateString("en-GB",{day:"numeric",month:"long"})),(i=document.querySelector(o))&&(i.innerHTML=a),a}})})}}),Object.keys(y).length)for(const[t,r]of Object.entries(y))document.querySelectorAll(`.product.section[data-product-handle="${t}"]`).forEach(e=>{const d=e.querySelector($.addonContainer);if(d){const l=document.createElement("div");l.classList.add("dbtfy-delivery-time");let i=!1;r.slice().reverse().forEach(t=>{if(!i){var a=theme.helpers.safelyParseJson(t.dataset.blockSettings).region.toLowerCase();let e=!1;if(e=!a||"all"===a||a===c.toLowerCase()||(a={europe:["AD","AL","AT","AX","BA","BE","BG","BY","CH","CY","CZ","DE","DK","EE","ES","FI","FO","FR","GB","GG","GI","GR","HR","HU","IE","IM","IS","IT","JE","LI","LT","LU","LV","MC","MD","ME","MK","MT","NL","NO","PL","PT","RO","RS","SE","SI","SJ","SK","SM","UA","VA","XK"],asia:["AE","AF","AM","AZ","BD","BH","BN","BT","CC","CN","CX","GE","HK","ID","IL","IN","IO","IQ","IR","JO","JP","KG","KH","KP","KR","KW","KZ","LA","LB","LK","MM","MN","MO","MV","MY","NP","OM","PH","PK","PS","QA","RU","SA","SG","SY","TH","TJ","TM","TR","TW","UZ","VN","YE"],"north america":["AG","AI","AW","BB","BL","BM","BQ","BS","BZ","CA","CR","CU","CW","DM","DO","GD","GL","GP","GT","HN","HT","JM","KN","KY","LC","MF","MQ","MS","MX","NI","PA","PM","PR","SV","SX","TC","TT","US","VC","VG","VI"],africa:["AO","BF","BI","BJ","BW","CD","CF","CG","CI","CM","CV","DJ","DZ","EG","EH","ER","ET","GA","GH","GM","GN","GQ","GW","KE","KM","LR","LS","LY","MA","MG","ML","MR","MU","MW","MZ","NA","NE","NG","RE","RW","SC","SD","SH","SL","SN","SO","SS","ST","SZ","TD","TG","TN","TZ","UG","YT","ZA","ZM","ZW"],antarctica:["AQ","BV","GS","HM","TF"],"south america":["AR","BO","BR","CL","CO","EC","FK","GF","GY","PE","PY","SR","UY","VE"],oceania:["AS","AU","CK","FJ","FM","GU","KI","MH","MP","NC","NF","NR","NU","NZ","PF","PG","PN","PW","SB","TK","TL","TO","TV","UM","VU","WF","WS"]}[a])&&a.includes(c)?!0:e){a=t;if(a){var r,n,s=a.querySelector($.itemText),o=theme.helpers.safelyParseJson(a.dataset.blockSettings);if(o)a=function(e,t){var a=+e.minDays,r=+e.maxDays;w.months;return function(e,t,a,r){!function(){var e=new Date,t=w.timeZone/60,e=e.getTimezoneOffset()/60-t}();const n=function(e,t,a,r){const n={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},s=[],o=a.excludeDays&&a.excludeDays.split(",").filter(e=>e).map(e=>e.trim().toLowerCase());for(const F in n)o&&o.forEach(e=>{n[F].toLowerCase().includes(e)&&s.push(F)});var i=(new Date).getTime(),d=new Date(i),l=new Date(i+864e5),i=new Date(i+864e7+864e5*t),c=[],a=function(o,e){const i=e.querySelector($.itemCutoff),t=(e.querySelector($.itemText),e.querySelector($.itemTimeline),new Date);let a=t.getDate();if(o.showDeliveryCutoffTime&&i){e=o.cutoffTime.split(":");let r=Number(e[0]),n=Number(e[1]),s=Number(e[2]);r<0?r=24+r:24<=r&&(r-=24,a+=1);e=`${r}:${n}:`+s;const l=new Date(`${t.getFullYear()}-${t.getMonth()+1}-${a} `+e);function d(){var t=o.timeUnit,a=new Date(l.getFullYear(),l.getMonth(),l.getDate(),r,n,s)-new Date;if(0<a){a=a,a=Math.floor(a/1e3);const{hours:r,minutes:n,seconds:s}={hours:Math.floor(a/3600),minutes:Math.floor(a%3600/60),seconds:a%60};let e;switch(t){case"1":e=`${0<r?String(r).padStart(2,"0")+" hours,":""} ${0<n?String(n).padStart(2,"0")+" minutes,":""}  ${String(s).padStart(2,"0")} seconds`;break;case"2":e=`${0<r?r+" hours,":""} ${0<n?n+" minutes,":""}  ${s} seconds`;break;case"3":e=`${0<r?String(r).padStart(2,"0")+"h ":""} ${0<n?String(n).padStart(2,"0")+"m ":""}  ${String(s).padStart(2,"0")}s`;break;case"4":e=`${0<r?r+"h ":""} ${0<n?n+"m ":""}  ${s}s`;break;case"5":e=(0<r?String(r).padStart(2,"0")+":":"")+(0<n?String(n).padStart(2,"0")+":":"")+String(s).padStart(2,"0");break;case"6":e=(0<r?r+":":"")+(0<n?n+":":"")+s}i.innerHTML=o.cutoffMessage.replace("{time}",e),i.classList.remove("d-block","mt-2")}else i.innerHTML=o.cutoffReached,i.classList.add("d-block","mt-2")}return d(),setInterval(d,1e3),t.getTime()>=l}return!1}(a,r),u=new Date(i),r=a?new Date(l):new Date(d);let D=0,y=0;for(var m=r;m<u;m.setDate(m.getDate()+1)){const A=m.getDay();var S,h,M,f,g,p,T,C,L=s&&s.some(e=>+e===A);!L&&D<e&&++D===e&&(S=m.getFullYear(),h=m.getMonth()+1,M=w.months.full[h],f=w.months.short[h],p=m.getDay(),g=w.weekdays.full[p],p=w.weekdays.short[p],T=m.getDate(),(C={}).startYear=S,C.startDateMonth=h,C.startDateMonthFull=M,C.startDateMonthShort=f,C.startWeekdayFull=g,C.startWeekdayShort=p,C.startDateDay=T,c.push(C)),!L&&y<t&&++y===t&&(S=m.getFullYear(),h=m.getMonth()+1,M=w.months.full[h],f=w.months.short[h],g=m.getDay(),p=w.weekdays.full[g],T=w.weekdays.short[g],C=m.getDate(),(L={}).endYear=S,L.endDateMonth=h,L.endDateMonthFull=M,L.endDateMonthShort=f,L.endWeekdayFull=p,L.endWeekdayShort=T,L.endDateDay=C,c.push(L))}return c}(e,t,a,r),[s,o]=n,i=a.dateFormat;return e=((e,t)=>{switch(t){case"1":return e.startDateDay+"/"+e.startDateMonth.toString().padStart(2,"0");case"2":return`${e.startWeekdayFull}, ${e.startDateMonth.toString().padStart(2,"0")}/`+e.startDateDay;case"3":return`${e.startWeekdayFull}, ${e.startDateDay}, `+e.startDateMonthFull;case"4":return`${e.startWeekdayFull}, ${e.startDateDay}/`+e.startDateMonthFull;case"5":return`${e.startDateMonth.toString().padStart(2,"0")}/${e.startDateDay} `+e.startWeekdayFull;case"6":return""+(s?s.startDateDay:"");default:return""+e.startDateDay}})(s,i),t=((e,t)=>{switch(t){case"1":return e.endDateDay+"/"+e.endDateMonth.toString().padStart(2,"0");case"2":return`${e.endWeekdayFull}, ${e.endDateMonth.toString().padStart(2,"0")}/`+e.endDateDay;case"3":return`${e.endWeekdayFull}, ${e.endDateDay}, `+e.endDateMonthFull;case"4":return`${e.endWeekdayFull}, ${e.endDateDay}/`+e.endDateMonthFull;case"5":return`${e.endDateMonth.toString().padStart(2,"0")}/${e.endDateDay} `+e.endWeekdayFull;case"6":return""+(o?o.endDateDay:"");default:return""+e.endDateDay}})(o,i),e===t?e:[e,t]}(a,r,e,t)}(o,a),Array.isArray(a)?([r,n]=a,s.innerHTML=o.text.replace("{min}",r).replace("{max}",n)):s.innerHTML=o.text.replace("{min}",a)}l.insertAdjacentElement("afterbegin",t),d.insertAdjacentElement("afterbegin",l),d.removeAttribute("hidden"),i=!0}}})}})}}})}theme.helpers.loadComponent("visibility",()=>{t()}),document.addEventListener("shopify:section:load",()=>{theme.helpers.loadComponent("visibility",()=>{t()})})}();