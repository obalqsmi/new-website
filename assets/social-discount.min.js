!function(){const s={},u={addonSection:".dbtfy-social-discount",button:".dbtfy-social-discount__button-wrapper",addonContainer:".dbtfy-social-discount-container",socialLinks:".social-sharing a",popup:"#social-discount-popup",popupBody:".dbtfy-social-discount__body",popupLoading:".dbtfy-social-discount__loading",popupReward:"#social-discount-reward-popup",rewardButton:".dbtfy-social-discount__reward-button"},a={addonEnabled:"dbtfy-social-discount-enabled",discountUsed:"dbtfy-social-discount-used"};function t(){var e=document.querySelector(u.addonSection);if(e){const d=e.querySelector(u.button);if(d){var t=theme.helpers.safelyParseJson(e.dataset.sectionSettings);if(t){s.discountName=t.discountName,s.discountAmount=t.discountAmount,s.discountType=t.discountType;document.querySelectorAll(".product.section").forEach(e=>{var t,o=e.querySelector(u.button),o=(o&&o.remove(),e.querySelector(u.addonContainer));o&&((e=document.createElement("div")).classList.add("dbtfy-social-discount"),e.insertAdjacentElement("beforeend",d.cloneNode(!0)),(t=e.querySelector(u.button))&&(t.querySelector("button")?.removeAttribute("data-has-modal-click-event"),t.removeAttribute("hidden")),o.insertAdjacentElement("afterbegin",e),o.removeAttribute("hidden"),theme.Modal.init())});t=localStorage.getItem("DebutifySocialDiscount");if("Yes"===t)document.body.classList.add(a.discountUsed);else{t=document.querySelectorAll(u.socialLinks);const o=document.querySelector(u.popup),n=e.querySelector(u.popupBody),i=e.querySelector(u.popupLoading),c=document.querySelector(u.popupReward);e=e.querySelector(u.rewardButton);t.forEach(e=>{e.addEventListener("click",()=>{n.setAttribute("hidden","hidden"),i.removeAttribute("hidden"),null==localStorage.getItem("DebutifySocialDiscount")&&setTimeout(function(){theme.Modal.close(o),theme.Modal.open(c)},1e4)})}),e&&e.addEventListener("click",()=>{s.discountName&&s.discountType&&s.discountAmount&&(theme.discountCode.addDiscount(s.discountName,s.discountType,s.discountAmount),theme.discountCode.init())}),c&&c.addEventListener("modal.close",()=>{localStorage.setItem("DebutifySocialDiscount","Yes"),setTimeout(()=>{document.body.classList.add(a.discountUsed)},window.themeVariables.animation.duration)})}}}}}document.body.classList.add(a.addonEnabled),theme.helpers.loadComponents(["modal","discountCode"],()=>{t()}),document.addEventListener("shopify:section:load",e=>{theme.helpers.loadComponents(["modal","discountCode"],()=>{t()})})}();