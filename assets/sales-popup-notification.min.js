!function(){const p={},d={addonSection:".dbtfy-sales-popup-notification",popupContent:".dbtfy-popup-notification",popup:".dbtfy-popup-notification-inner",closeButton:".dbtfy-popup-notification-close-btn",closeLink:".dbtfy-popup-notification-close-link",productReview:".dbtfy-sales-popup__review"};function e(){if(document.querySelector(d.addonSection)){var t=window.sales_popup_notification_settings;if(t){p.icon=t.icon,p.badgeIcon=t.badge_icon,p.badgeText=t.badge_text,p.customBadgeIcon=t.custom_badge_icon,p.enableBadge=t.enable_badge,p.cityNames=t.city_names.split(","),p.customerNames=t.customer_names.split(","),p.delayTime=1e3*Number(t.delay_time),p.displayTime=1e3*Number(t.display_time),p.enableMultiplePurchases=t.enable_multiple_purchases,p.enableNotificationSound=t.enable_notification_sound,p.popupAnimationStyle=t.popup_animation_style,p.productImageEdgeRadius=t.product_image_edge_radius,p.productImageShape=t.product_image_shape,p.productImageWidth=t.product_image_width,p.productImageHeight=t.product_image_height,p.showButtonForDetail=t.show_button_for_detail,p.detailButtonText=t.detail_button_text,p.showHyperlinkToProductImage=t.show_hyperlink_to_product_image,p.showLowStockBar=t.show_low_stock_bar,p.showNotificationInQueue=t.show_notification_in_queue,p.showProductStarRating=t.show_product_star_rating,p.textForLowStockBar=t.text_for_low_stock_bar,p.thresholdQuantity=t.threshold_quantity,p.time=t.time,p.dontShowAgain=t.dont_show_again,p.products=function(t){var e=[];var o=t.product_titles.split(","),i=t.product_urls.split(","),n=t.product_images.split(","),a=t.product_inventories.split(","),c=document.querySelectorAll(d.productReview);for(var s=0;s<o.length;s++)e.push({title:o[s],url:i[s],image:n[s],inventory:a[s],review:c[s].innerHTML});return e}(t);const c=setInterval(()=>{var t=document.querySelectorAll(d.popup);t.length&&t[0].remove()},p.displayTime),s=setInterval(()=>{var t,e=document.querySelectorAll(d.popup);const o=document.querySelector(d.popupContent);if(e.length<1&&p.enableMultiplePurchases||!e.length&&!p.enableMultiplePurchases){e=Math.floor(Math.random()*p.customerNames.length),i=Math.floor(Math.random()*p.cityNames.length),n=Math.floor(Math.random()*p.products.length);var e=[e,i,n];i=e[0],n=e[1],e=e[2],(t=document.createElement("div")).classList.add("dbtfy-popup-notification-inner","animation-style-"+p.popupAnimationStyle,"p-3"),t.innerHTML=`
    <button class="btn btn--square-sm dbtfy-popup-notification-close-btn">
    <span class="${p.icon}" translate="no">close</span>
    </button>
    <div class="row justify-content-center align-items-center">
      <div class="col-3">
          <div class="dbtfy-popup-notification__product-image-wrapper ${p.showHyperlinkToProductImage?"dbtfy-popup-notification__product-image-link":""}">
              <div class="dbtfy-popup-notification__product-image dbtfy-popup-notification__product-image--${p.productImageShape}" style="${"rounded"==p.productImageShape?"aspect-ratio: "+p.productImageWidth+" / "+p.productImageHeight+";":""}${"rounded"==p.productImageShape||"portrait"==p.productImageShape||"landscape"==p.productImageShape?"border-radius: "+p.productImageEdgeRadius+"px;":""}">
                  <${p.showHyperlinkToProductImage?"a":"div"} class="dbtfy-popup-notification__product-image-inner d-block" ${p.showHyperlinkToProductImage?'href="'+p.products[e].url+'"':""}>
                    <img src="${window.location.origin+"/cdn/shop/"+p.products[e].image}" alt="${p.products[e].title}" width="${p.productImageWidth}" height="${p.productImageHeight}">
                  </${p.showHyperlinkToProductImage?"a":"div"}>
              </div>
          </div>
      </div>
      <div class="col-9">
          <div class="dbtfy-popup-notification__product-info d-flex flex-column justify-content-center">
              <p class="dbtfy-popup-notification__customer-info text-sm mb-2">
                ${p.customerNames[i]} from ${p.cityNames[n]} bought
              </p>
              <a class="dbtfy-popup-notification__product-title ${p.showHyperlinkToProductImage?"dbtfy-popup-notification__product-link":""} h6 mb-2" href="${p.products[e].url}">${p.products[e].title}</a>
              ${p.showLowStockBar&&p.products[e].inventory<=p.thresholdQuantity&&0<p.products[e].inventory?'<p class="dbtfy-popup-notification__product-stock text-sm mb-2">'+p.textForLowStockBar.replace("_STOCK_",p.products[e].inventory)+"</p>":""}
              ${p.showLowStockBar&&p.products[e].inventory<=p.thresholdQuantity&&0<p.products[e].inventory?'<div class="dbtfy-popup-notification__prgress-bar mb-2"><div class="dbtfy-popup-notification__prgress-bar-content" style="width: '+p.products[e].inventory/p.thresholdQuantity*100+'%"></div></div>':""}
              <div class="d-flex align-items-center mb-2">
                ${p.showProductStarRating?'<span class="dbtfy-popup-notification__product-star-rating product__reviews me-3">'+document.querySelectorAll(d.productReview)[e].innerHTML+"</span>":""}
                <span class="dbtfy-popup-notification__time text-sm">${p.time}</span>
                ${p.enableBadge&&!p.customBadgeIcon?'<span class="dbtfy-popup-notification__badge ms-auto badge d-inline-flex align-items-center"><span class="'+p.icon+'  me-1" translate="no">'+p.badgeIcon+"</span>"+p.badgeText+"</span>":""}
                ${p.enableBadge&&p.customBadgeIcon?'<span class="dbtfy-popup-notification__badge ms-auto badge d-inline-flex align-items-center"><img class="me-1" src="'+p.customBadgeIcon+'" alt="'+p.badgeText+'" width="16" height="16">'+p.badgeText+"</span>":""}
              </div>
              <div class="d-flex align-items-center">
                ${p.detailButtonText&&p.showButtonForDetail?'<a class="btn btn--xs btn--primary me-2" href="'+p.products[e].url+'">'+p.detailButtonText+"</a>":""}
                <button class="dbtfy-popup-notification-close-link text-sm ms-auto">${p.dontShowAgain}</button>
              </div>
          </div>
      </div>
    </div>
    `;const a=t;o.appendChild(a),p.enableNotificationSound&&new Audio("https://cdn.shopify.com/s/files/1/0797/5462/5217/files/sales-popup-notification.wav?v=1727858812").play().catch(t=>{console.error("Error playing audio:",t)});var i=a.querySelector(d.closeButton),n=a.querySelector(d.closeLink);i.addEventListener("click",t=>{t.preventDefault(),a.remove()}),n.addEventListener("click",t=>{t.preventDefault(),o.innerHTML="",clearInterval(s),clearInterval(c),document.querySelector(d.addonSection).setAttribute("hidden","")})}},p.delayTime)}}}document.body.classList.add("dbtfy-sales-popup-notification-enabled"),e(),document.addEventListener("theme:cart:loaded",t=>{e()})}();