!function(){const o={isClickedFromQuickCompareModal:!1},n={section:".dbtfy-collection-addtocart",select:".dbtfy-collection-addtocart__select",button:".dbtfy-collection-addtocart__button"};var e;function t(t){document.querySelectorAll(n.section).forEach(e=>{var d=e.querySelector(n.select);const o=e.querySelector(n.button);if(o&&d&&!d.hasAttribute("data-has-change-event")){let e=document.querySelector(".dbtfy-collection-addtocart__select-temp-generated"),t=document.querySelector(".dbtfy-collection-addtocart__select-temp-generated option");e||(e=document.createElement("select"),t=document.createElement("option"),e.classList.add("dbtfy-collection-addtocart__select-temp-generated","btn","btn--sm","text-ellipsis"),e.setAttribute("hidden","hidden"),e.style.setProperty("width","fit-content"),e.insertAdjacentElement("afterbegin",t),document.body.insertAdjacentElement("beforeend",e),e=document.querySelector(".dbtfy-collection-addtocart__select-temp-generated"),t=document.querySelector(".dbtfy-collection-addtocart__select-temp-generated option")),e.removeAttribute("hidden"),t.innerHTML=d.options[0].value,d.style.setProperty("width",e.getBoundingClientRect().width+"px"),o.style.setProperty("width",e.getBoundingClientRect().width+"px"),e.setAttribute("hidden","hidden"),d.addEventListener("change",()=>{o.click()})}o&&!o.hasAttribute("data-has-click-event")&&(o.addEventListener("click",a),o.setAttribute("data-has-click-event","true")),d&&(d.selectedIndex=0,d.setAttribute("data-has-change-event","true")),o&&t&&theme.helpers.loadComponent("loadingState",()=>{theme.loadingState.destroy(o)})}),theme.helpers.loadComponent("ajaxCart",()=>{theme.ajaxCart.init()})}function a(e){const d=e.target;if(theme.helpers.loadComponent("loadingState",()=>{theme.loadingState.init(d)}),o.isClickedFromQuickCompareModal){e.preventDefault();const t=this.closest("form");t.setAttribute("data-has-submit-listener","true"),theme.ShopifyAPI.addItemFromForm({forms:t},e=>{document.body.classList.contains("dbtfy-upsell-popup-enabled")?document.dispatchEvent(new CustomEvent("theme:addon:upsell-popup:form-submitted",{detail:{form:t}})):theme.helpers.loadComponent("ajaxCart",()=>{theme.ajaxCart.update()})}),document.addEventListener("theme:cart:loaded",e=>{const t=document.querySelector("#quick-compare");theme.helpers.loadComponent("loadingState",()=>{theme.loadingState.destroy(d)}),t&&theme.helpers.loadComponent("modal",()=>{theme.Modal.close(t)})})}document.addEventListener("theme:cart:loaded",e=>{theme.helpers.loadComponent("loadingState",()=>{theme.loadingState.destroy(d)})})}document.body.classList.add("dbtfy-collection-addtocart-enabled"),t(),document.addEventListener("shopify:section:load",()=>{t()}),document.addEventListener("theme:cart:loaded",e=>{t()}),document.addEventListener("theme:cart:loading-error",e=>{t(!0)}),document.addEventListener("theme:section:product-recommendations:loaded",e=>{t()}),document.addEventListener("theme:addon:collection-filters:loaded",()=>{t()}),document.addEventListener("theme:addon:infinite-scroll:loaded",()=>{t()}),document.addEventListener("theme:addon:mega-menu:loaded",()=>{t()}),document.addEventListener("theme:addon:quick-compare:loaded",()=>{o.isClickedFromQuickCompareModal=!0,t()}),document.addEventListener("theme:addon:recently-viewed:loaded",()=>{t()}),document.addEventListener("theme:addon:wishlist:loaded",()=>{t()}),document.body.classList.contains("dbtfy-quick-compare-enabled")&&(e=document.querySelector(".dbtfy-quick-compare__modal"))&&e.classList.contains("js-modal-open")&&(document.querySelectorAll(n.section).forEach(e=>{e.querySelector(n.button).removeAttribute("data-has-click-event")}),o.isClickedFromQuickCompareModal=!0,t())}();