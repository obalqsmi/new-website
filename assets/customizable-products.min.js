!function(){const d={addonSection:".dbtfy-customizable-products",block:".dbtfy-customizable-products__block",blockCheckbox:".dbtfy-customizable-products__block-checkbox",blockCheckboxHidden:".dbtfy-customizable-products__block-checkbox-hidden",addonContainer:".dbtfy-customizable-products-container",productJSON:"[data-product-json]"};theme.helpers.loadComponent("visibility",()=>{var e=document.querySelector(d.addonSection);if(e){const o=e.querySelectorAll(d.block);if(o.length){e=document.querySelectorAll(".product.section");const n={};if(e.forEach(e=>{var t=e.querySelector(d.addonSection),e=e.querySelector(d.productJSON);const c=e?JSON.parse(e.innerHTML):null;if(t&&t.remove(),c){const r=c.handle;o.forEach(o=>{var e=theme.helpers.safelyParseJson(o.dataset.blockSettings);e&&theme.Visibility.check(c,e,()=>{var e,t;e=r,t=o,n[e]?n[e].includes(t)||n[e].push(t):n[e]=[t]})})}}),Object.keys(n).length){for(const[t,o]of Object.entries(n))document.querySelectorAll(`.product.section[data-product-handle="${t}"]`).forEach(e=>{e=e.querySelector(d.addonContainer);if(e){const t=document.createElement("div");t.classList.add("dbtfy-customizable-products","row","gy-3"),o.forEach(e=>{t.insertAdjacentElement("beforeend",e.cloneNode(!0))}),e.insertAdjacentElement("afterbegin",t),e.removeAttribute("hidden")}});!function(){var e=document.querySelectorAll(d.addonContainer);e.forEach((e,n)=>{const l=e.closest(".product.section")?.querySelector(".product__form");e.querySelectorAll(d.block).forEach((e,r)=>{var t=e.querySelectorAll("input, textarea, select");const o=e.querySelectorAll(d.blockCheckbox),c=e.querySelector(d.blockCheckboxHidden);o.forEach(e=>{e.addEventListener("change",()=>{var e=Array.from(o).reduce((e,t)=>t.checked?e+", "+t.value:e,"").slice(2);c.value=e})}),t.forEach((e,t)=>{var o=e.parentElement.querySelector("label"),c=l?.getAttribute("id");o.setAttribute("for",e.id+`-${n}-${r}-`+t),e.setAttribute("id",e.id+`-${n}-${r}-`+t),c&&e.setAttribute("form",c)})})})}()}}}})}();