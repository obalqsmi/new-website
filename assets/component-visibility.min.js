window.theme=window.theme||{},theme.Visibility={check:function(t,e,i){if(!t)return null;var s=t.collections;const o=e.collection;var s=s.some(t=>t.handle===o),l=t.tags,r=e.tags,l=l.map(t=>t.toLowerCase());const a=r.split(",").filter(t=>t).map(t=>t.trim().toLowerCase()),c=(r=l.some(t=>a.includes(t)),t.type);var l=e.types.split(",").filter(t=>t).map(t=>t.trim().toLowerCase()).some(t=>{return t===c.toLowerCase()}),t=t.id,n=+e.productId;("all"===e.visibility||"product"===e.visibility&&t===n||"collection"===e.visibility&&s||"tag"===e.visibility&&r||"type"===e.visibility&&l)&&i()},sort:function(t,e){t=t.querySelectorAll(e);const s=new Map;return s.set("all",[]),s.set("collection",[]),s.set("type",[]),s.set("tag",[]),s.set("product",[]),t.forEach(t=>{var e,i=theme.helpers.safelyParseJson(t.dataset.blockSettings);i&&(i=i.visibility,s.has(i))&&((e=s.get(i)).push(t),s.set(i,e))}),s}};