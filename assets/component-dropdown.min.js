window.theme=window.theme||{},theme.Dropdown=function(e){e=e||document;const d={dropdownOpen:"dropdown--open",dropdownOutside:"dropdown--outside",dropdownOnClick:"dropdown--click",dropdownTimeout:"dropdown--timeout"},r={dropdown:".dropdown",dropdownToggle:":scope > .dropdown__toggle",dropdownMenu:":scope > .dropdown__menu",dropdownSelect:".dropdown select"},o=e.querySelectorAll(r.dropdown);e=e.querySelectorAll(r.dropdownSelect);if(o.length){let t=!1;function s(e){e.target.closest(r.dropdown)||a()}function i(e){var o=e.querySelectorAll(r.dropdownToggle),n=e.querySelectorAll(r.dropdownMenu);e.classList.add(d.dropdownOpen),o.forEach(e=>{e.setAttribute("aria-expanded",!0)}),n.forEach(e=>{var o=e.getBoundingClientRect().top,o=window.innerHeight-(o+25);e.classList.add(d.dropdownOpen),e.style.maxHeight=o+"px",l(e)})}function c(o){var e=o.querySelectorAll(r.dropdownToggle),n=o.querySelectorAll(r.dropdownMenu);e.forEach(e=>{e.setAttribute("aria-expanded",!1)}),n.forEach(e=>{theme.helpers.closeTransition({elementToTransition:e,animationSpeed:window.themeVariables.animation.speed},function(){o.classList.remove(d.dropdownOpen),e.classList.remove(d.dropdownOpen)})})}function a(){o.forEach(e=>{e.classList.contains(d.dropdownOpen)&&c(e)})}function l(e){document.body.clientWidth<e.getBoundingClientRect().left+e.offsetWidth&&e.classList.add(d.dropdownOutside)}o.forEach(o=>{let n=null;o.querySelectorAll(r.dropdownMenu).forEach(e=>{l(e)}),o.addEventListener("theme:component:dropdown:show",()=>{i(o)}),o.classList.contains(d.dropdownOnClick)?o.addEventListener("click",e=>{t=!1,e.target.closest(".dropdown__menu")||(null!==n&&(clearTimeout(n),n=null),a(),(o.classList.contains(d.dropdownOpen)?c:i)(o))},{passive:!0}):(o.addEventListener("mouseenter",()=>{t=!1,null!==n&&(clearTimeout(n),n=null),o.classList.contains(d.dropdownOpen)||i(o)},{passive:!0}),o.addEventListener("touchstart",e=>{e=e.target.closest(".dropdown__menu");(!o.classList.contains(d.dropdownOpen)||e?i:c)(o)},{passive:!0}),document.addEventListener("touchstart",e=>{e.target.closest(r.dropdown)||a()},{passive:!0}),o.addEventListener("mouseleave",e=>{null===e.relatedTarget||t||o.classList.contains(d.dropdownOpen)&&(o.classList.contains(d.dropdownTimeout)?n=setTimeout(()=>{c(o)},300):c(o))},{passive:!0})),document.addEventListener("click",s,{passive:!0}),document.addEventListener("touchstart",s,{passive:!0})}),e.forEach(e=>{e.addEventListener("change",()=>{t=!0})}),window.addEventListener("resize",()=>{o.forEach(e=>{e.querySelectorAll(r.dropdownMenu).forEach(e=>{l(e)})})}),document.addEventListener("keyup",e=>{if(9===e.which){const n=function(o,n){if(o&&n){var t=[];let e=o.closest(n);for(;null!==e;)t.push(e),e=e.parentElement.closest(n);return t}}(document.activeElement,r.dropdown);n.length?(o.forEach(o=>{!n.some(e=>o===e)&&o.classList.contains(d.dropdownOpen)&&c(o)}),n.forEach(e=>{e.classList.contains(d.dropdownOpen)||i(e)})):a()}})}};