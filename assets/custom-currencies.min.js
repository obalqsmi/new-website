!function(){var e={addon:window.themeVariables.settings.addons.customCurrencies,files:window.themeVariables.files,strings:window.themeVariables.strings};const u={currencyFormat:e.addon.currencyFormat,savedCurrency:sessionStorage.getItem("currencyCode"),shopCurrency:e.strings.shopCurrency,currenciesPluginUrl:e.files.vendors.js.currencies},o={addonSection:".dbtfy-custom-currencies",addonContainer:".dbtfy-custom-currencies-container",select:".dbtfy-custom-currencies__select",variantSelect:"select[name='id']"};document.body.classList.add("dbtfy-custom-currencies-enabled");const r={name:"currencies",type:"js",src:u.currenciesPluginUrl};function n(){theme.Currency.format=u.currencyFormat;const t=document.querySelectorAll(o.addonContainer);document.querySelectorAll(o.addonSection).forEach(e=>{const r=e.querySelector(o.select);e=r.querySelector(`option[value='${u.savedCurrency}']`);null==u.savedCurrency?theme.Currency.currentCurrency=u.shopCurrency:e?u.savedCurrency&&u.savedCurrency!==u.shopCurrency?(theme.Currency.currentCurrency=u.savedCurrency,theme.Currency.convertAll(u.shopCurrency,u.savedCurrency)):(theme.Currency.currentCurrency=u.shopCurrency,theme.Currency.convertAll(u.shopCurrency,u.savedCurrency),t.forEach(e=>{e.setAttribute("hidden","hidden")})):(theme.Currency.currentCurrency=u.shopCurrency,sessionStorage.setItem("currencyCode",u.shopCurrency)),r.value=theme.Currency.currentCurrency,r.addEventListener("change",()=>{var e=r.value;sessionStorage.setItem("currencyCode",e)}),s();{const n=document.querySelectorAll(o.addonContainer),c=document.querySelectorAll(o.addonSection);c.forEach(e=>{e=e.querySelector(o.select);u.shopCurrency===e.value?n.forEach(e=>{e.setAttribute("hidden","hidden")}):(theme.Currency.convertAll(u.shopCurrency,e.value),u.savedCurrency&&u.savedCurrency!==u.shopCurrency||n.forEach(e=>{e.setAttribute("hidden","hidden")}),n.forEach(e=>{e=e.querySelector(".selected-currency");e&&(e.innerHTML=theme.Currency.currentCurrency)}))})}})}function c(){""!==theme.Currency.currentCurrency&&(theme.Currency.convertAll(u.shopCurrency,theme.Currency.currentCurrency),s())}function s(){document.querySelectorAll(o.variantSelect).forEach(e=>{e.querySelectorAll("option").forEach(r=>{var n=r.dataset.variantSettings;if(n){n=theme.helpers.safelyParseJson(n);if(n){var c=n.title,n=n.price;if(!isNaN(n)){n=Currency.convert(n,u.shopCurrency,theme.Currency.currentCurrency);let e="";var t;["money_format","money_with_currency_format","money_without_trailing_zeros","money_without_trailing_zeros_with_currency","money_without_sign_and_with_currency","money_without_sign_and_with_decimal"].includes(u.currencyFormat)&&(t=theme.Currency.moneyFormats[theme.Currency.currentCurrency],(e=t?theme.Currency.formatMoney(n,t[u.currencyFormat]):e)?r.innerHTML=c+" - "+e:r.innerHTML=c)}}}})})}theme.helpers.loadAsset(r).then(()=>{n(),window.Currency?c():theme.helpers.loadAsset(r).then(()=>{c()})}),document.addEventListener("theme:cart:loaded",()=>{window.Currency?n():theme.helpers.loadAsset(r).then(()=>{n()})}),document.addEventListener("theme:addon:custom-currencies:convert-prices",()=>{window.Currency?c():theme.helpers.loadAsset(r).then(()=>{c()})})}();