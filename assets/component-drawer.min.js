window.theme=window.theme||{},theme.Drawer=function(){function e(e,t,s={}){var i={id:e,close:".js-drawer-close",open:".js-drawer-open-button-"+t,drawerLeftClass:"drawer--left",drawerRightClass:"drawer--right",drawerTopClass:"drawer--top",drawerBottomClass:"drawer--bottom",openClass:"js-drawer-open",dirOpenClass:"js-drawer-open-"+t};this.drawer=document.getElementById(e),this.drawer&&(this.nodes={parent:document.body,page:this.drawer.nextElementSibling,moved:document.querySelectorAll(".page-container")},this.position=t,this.config={...i,...s},this.drawerIsOpen=!!this.config.isOpened,this.init())}return e.prototype=Object.assign({},e.prototype,{init:function(){var e=document.querySelectorAll(`${this.config.open}[aria-controls=${this.config.id}]`),t=this.drawer.querySelector(""+this.config.close);e.forEach(e=>{e.setAttribute("aria-expanded","false"),e.addEventListener("click",this.open.bind(this))}),t&&t.addEventListener("click",this.close.bind(this))},open(e){let t=!1;var s=document.querySelectorAll(`.drawer:not([id='${this.config.id}'])`);if(document.body.classList.contains("dbtfy-cart-notification-enabled")&&(window.initNotificationToast=!1),this.drawerIsOpen)e&&e.preventDefault();else{if(s.forEach(e=>{e.classList.contains(this.config.openClass)&&(e.classList.contains(this.config.drawerLeftClass)||theme.LeftDrawer.close(),e.classList.contains(this.config.drawerRightClass)||theme.RightDrawer.close(),e.classList.contains(this.config.drawerTopClass)||theme.TopDrawer.close(),e.classList.contains(this.config.drawerBottomClass))}),e?e.preventDefault():t=!0,e&&e.stopPropagation&&(e.stopPropagation(),this.activeSource=e.currentTarget),this.drawerIsOpen&&!t)return this.close();this.drawer.classList.add(this.config.openClass),this.nodes.parent.classList.add(this.config.openClass,this.config.dirOpenClass),this.drawerIsOpen=!0,theme.helpers.trapFocus({container:this.drawer}),!this.config.onDrawerOpen||"function"!=typeof this.config.onDrawerOpen||t||setTimeout(()=>{this.config.onDrawerOpen()},window.themeVariables.animation.duration),this.activeSource&&this.activeSource.hasAttribute("aria-expanded")&&this.activeSource.setAttribute("aria-expanded","true"),this.bindEvents()}},close(e){this.drawerIsOpen&&(e&&27!==e.keyCode&&e.preventDefault(),document.activeElement.blur(),theme.helpers.closeTransition({elementToTransition:this.drawer}),this.drawer.classList.remove(this.config.openClass),theme.helpers.closeTransition({elementToTransition:this.nodes.parent}),this.nodes.parent.classList.remove(this.config.openClass,this.config.dirOpenClass),this.drawerIsOpen=!1,theme.helpers.removeTrapFocus({container:this.drawer}),this.activeSource&&this.activeSource.hasAttribute("aria-expanded")&&this.activeSource.setAttribute("aria-expanded","false"),this.drawer.dispatchEvent(new CustomEvent("drawer.close")),this.unbindEvents())},bindEvents(){this.nodes.page.addEventListener("touchmove",this.pageTouchmoveEventListener.bind(this),{passive:!0}),this.nodes.page.addEventListener("click",this.pageClickEventListener.bind(this)),this.nodes.parent.addEventListener("keyup",this.parentKeyUpEventListener.bind(this))},unbindEvents(){this.nodes.page.removeEventListener("touchmove",this.pageTouchmoveEventListener),this.nodes.page.removeEventListener("click",this.pageClickEventListener),this.nodes.parent.removeEventListener("keyup",this.parentKeyUpEventListener)},pageTouchmoveEventListener(){return!1},pageClickEventListener(e){this.close(e)},parentKeyUpEventListener(e){27===e.keyCode&&this.close(e)}}),e}();