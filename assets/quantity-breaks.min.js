!function(){const E={moneyFormat:window.themeVariables.settings.moneyFormat},_={addonSection:".dbtfy-quantity-breaks",cartBreak:".dbtfy-quantity-breaks__cart-break",productBreaksContainer:".dbtfy-quantity-breaks-container",productBreaks:".dbtfy-quantity-breaks__product-breaks",productBreak:".dbtfy-quantity-breaks__product-break",productSection:".product.section",productForm:".product__form",quantity:".dbtfy-quantity-breaks__quantity",productJSON:"[data-product-json]",masterSelect:"[data-product-master-select]",quantityInput:".product-quantity__input"};let k=[];function e(t){theme.helpers.loadComponents(["discountCode","visibility"],()=>{t()})}function a(){const f=document.querySelector(_.addonSection);if(f){const v=theme.helpers.safelyParseJson(f.dataset.sectionSettings);if(v){E.singleBreakText=v.singleBreakText,E.singleBreakSubtext=v.singleBreakSubtext,E.singleBreakSubtextBreaks=v.singleBreakSubtextBreaks,E.text=v.text,E.highestDiscountText=v.highestDiscountText;const h={add:function(e){var t=this.getStoredQuantityBreaks();t.length?t.some(t=>t.productId===e.productId)||(t.push(e),sessionStorage.setItem("breaks-discounts",JSON.stringify(t))):sessionStorage.setItem("breaks-discounts",JSON.stringify([e]))},getStoredQuantityBreaks:function(){var t=sessionStorage.getItem("breaks-discounts");return!t||"object"!=typeof(t=JSON.parse(t))?[]:t}};function e(){theme.isCartLoaded?t():document.addEventListener("theme:cart:initially-loaded",()=>{t()})}function t(){var t=theme.cart;if(t){if(k!==theme.cart.items&&(k=theme.cart.items,document.querySelectorAll(_.productBreak).length)){var a=f.querySelectorAll(_.productBreaks);if(a.length&&(a=`
        <div class="dbtfy-quantity-breaks-container">
          ${Array.from(a).reduce((t,e)=>{var a=e.querySelectorAll(_.productBreak);return a.length?(e=theme.helpers.safelyParseJson(e.dataset.blockSettings))?(a=Array.from(a).reduce((t,e)=>{e=theme.helpers.safelyParseJson(e.dataset.blockSettings);return e?t+`
            <div class="radio dbtfy-quantity-breaks__quantity">
              <input type="radio"
                     id="Quantity-break"
                     name="quantity"
                     value="1"
                     data-range="${+e.range}"
                     data-discount-code="${e.discountCode}"
                     data-discount-type="${e.discountType}"
                     data-discount-amount="${+e.discountAmount}"
                     data-product-break-tag-1="${e.productBreakTag1}"
                     data-product-break-tag-1-background-color="${e.productBreakTag1BackgroundColor}"
                     data-product-break-tag-1-text-color="${e.productBreakTag1TextColor}"
                     data-product-break-tag-1-border-color="${e.productBreakTag1BorderColor}"
                     data-product-break-tag-2="${e.productBreakTag2}"
                     data-product-break-tag-2-background-color="${e.productBreakTag2BackgroundColor}"
                     data-product-break-tag-2-text-color="${e.productBreakTag2TextColor}"
                     data-product-break-tag-2-border-color="${e.productBreakTag2BorderColor}"
                     class="dbtfy-quantity-breaks__radio">

              <label for="Quantity-break">
                ${E.singleBreakText}
              </label>
              
              <div class="dbtfy-quantity-breaks__variant-pickers-wrapper"></div>
            </div>
          `:""},""),t+`
          <div class="dbtfy-quantity-breaks__product-breaks mt-4"
               data-block-settings='${JSON.stringify(e)}'>

            <div class="radio dbtfy-quantity-breaks__quantity">
              <input type="radio"
                     id="Quantity-break"
                     data-range="1"
                     name="quantity"
                     value="1"
                     class="dbtfy-quantity-breaks__radio">

              <label for="Quantity-break">
                ${E.singleBreakText}
              </label>
            </div>

            ${a}
          </div>
        `):void 0:t},"")}
        </div>
      `,f.insertAdjacentHTML("beforeend",a)),(a=document.querySelectorAll(_.productSection)).length){var e,r,o=a,n=theme.Visibility.sort(f,_.productBreaks);for([e,r]of n)r.forEach(t=>{var e=theme.helpers.safelyParseJson(t.dataset.blockSettings);if(e){const d={...e,template:t.cloneNode(!0)};o.forEach(i=>{var t=i.querySelector(_.productJSON),t=t?JSON.parse(t.innerHTML):null;t&&theme.Visibility.check(t,d,()=>{var t,e,a,r,o,n;t=i,e=d,t&&(e=e.template.cloneNode(!0)).innerHTML.trim()&&(t.querySelectorAll(_.productBreaks).forEach(t=>{t.remove()}),t=t.querySelector(".product__quantity"),a=t.querySelector(".product-quantity"),r=t.querySelector("label"),o=document.body.classList.contains("template-product"),n=theme.helpers.safelyParseJson(e.dataset.blockSettings))&&(!n.showOnProductPage&&o?(a.setAttribute("hidden","hidden"),r.setAttribute("hidden","hidden")):(a.removeAttribute("hidden"),r.removeAttribute("hidden")),a.classList.add("dbtfy-quantity-breaks"),t.classList.add("dbtfy-quantity__wrapper"),a.insertAdjacentElement("beforeend",e),n=t.querySelector("label"))&&v.heading&&(n.classList.add("h5","pb-2"),n.innerText=v.heading)})})}});if((n=f.querySelector(E.productBreaksContainer))&&n.remove(),document.querySelectorAll(_.productBreaks).forEach((t,r)=>{const o=t.closest(_.productSection);t.querySelectorAll(_.quantity).forEach((t,e)=>{var a=t.querySelector("label"),t=t.querySelector("input");a.setAttribute("for",t.id+`-${r}-`+e),t.setAttribute("id",t.id+`-${r}-`+e),o&&t.setAttribute("form","AddToCartForm--"+o.dataset.sectionId),0===e&&t.setAttribute("checked","checked")})}),document.body.classList.contains("template-product")){const s=document.querySelector(".dbtfy-sticky-addtocart__quantity input[name='quantity']");s&&(n=document.querySelector(".section.product"))&&(i=n.querySelectorAll(".dbtfy-quantity-breaks__quantity input[name='quantity']"),n=n.querySelector(".dbtfy-quantity-breaks__quantity input[name='quantity']:checked"),i.forEach(t=>{t.addEventListener("change",()=>{s.value=t.value})}),n)&&(s.value=n.value)}var i=document.querySelectorAll("[data-product-option-selector]"),n=document.querySelectorAll(".product__form--no-variants"),n=(i.forEach(t=>{t.addEventListener("change",t=>{m(t)}),m({target:t})}),n.forEach(t=>{m({target:t})}),a);n.length&&n.forEach(a=>{const r=a.querySelector(".product__form");r&&r.addEventListener("submit",()=>{var t,e;t=a,e=r,t&&e&&(e=+t.dataset.productId,t=t.querySelectorAll(_.quantity),t=Array.from(t).map(t=>{var t=t.querySelector("input"),e=+t.dataset.range,a=t.dataset.discountCode,r=t.dataset.discountType,t=+t.dataset.discountAmount;if(1!=e)return{breakCount:e,discount:{code:a,type:r,amount:t}}}).filter(t=>t),e={productId:e,breaks:t},h.add(e))})})}{const y=theme.cart,b=h.getStoredQuantityBreaks();b.forEach(t=>{const a=t.productId;t=t.breaks;const r=y.items.reduce((t,e)=>e.product_id===a?t+e.quantity:t,0);var e=t.slice().reverse().find(t=>t.breakCount<=r),e=e?e.discount:null,o=theme.discountCode.getStoredDiscounts();const n=q(theme.discountCode.getMostValuableDiscount(o,y),y);o=q(e,y),e=y.total_price;const i=t.find(t=>{var e=q(t.discount,y);return t.breakCount>r&&e>n}),d=i?i.discount:null;t=q(d,y);let c=`
            <div class="dbtfy-quantity-breaks dbtfy-quantity-breaks__product-break">
                <div class="card text-center dbtfy-quantity-breaks__alert dbtfy-quantity-breaks__product-break-remains">
                    <div class="card__body card__body--xs">
                        <div class="dbtfy-quantity-breaks__text">
        `;function s(){return E.highestDiscountText?`<div>${E.highestDiscountText}</div>`:""}c=c+(0<t&&o<t&&t<=e?function(){let t="";var e=i.breakCount-r;let a=d.amount+"%";"$"===d.type&&(a=`<span class="money">${theme.Currency.formatMoney(100*d.amount,E.moneyFormat)}</span>`);E.text&&(t+=E.text.replaceAll("_COUNT_",`<strong class="text-secondary">${e}</strong>`).replaceAll("_DISCOUNT_AMOUNT_",`<strong class="text-secondary">${a}</strong>`));return t}:s)()+"</div></div></div></div>",y.items.forEach(t=>{t=t.product_id;t===a&&document.querySelectorAll(`.cart__row[data-product-id='${t}']`).forEach(t=>{var e=t.closest(".cart-drawer, .cart-modal");t.querySelectorAll(".dbtfy-quantity-breaks, .dbtfy-quantity-breaks__product-break").forEach(t=>{t.remove()}),t.insertAdjacentHTML("afterbegin",c),e&&(e=t.querySelector(".dbtfy-quantity-breaks__product-break"))&&e.classList.add("mb-3")})}),document.dispatchEvent(new CustomEvent("theme:addon:custom-currencies:convert-prices")),theme.discountCode.init()})}}var u=t,a=f.querySelectorAll(_.cartBreak);if(a.length){const p=u.original_total_price;let s=u.item_count,r=document.createElement("div");n=document.createElement("div"),t=document.createElement("div");let o=document.createElement("div");r.classList.add("dbtfy-quantity-breaks","dbtfy-quantity-breaks--cart-break"),n.classList.add("card","text-center","dbtfy-quantity-breaks__alert"),t.classList.add("card__body","card__body--xs"),o.classList.add("dbtfy-quantity-breaks__text"),r.appendChild(n),t.appendChild(o),n.appendChild(t);n=Array.from(a).map(t=>{var e,a,r,t=theme.helpers.safelyParseJson(t.dataset.blockSettings);if(t)return e=+t.range,a=t.discountCode,r=+t.discountAmount,{name:a,type:t.discountType,amount:r,range:e}}),t=Array.from(n,t=>t.range).sort((t,e)=>t-e);let e=t.reduce((t,e)=>Math.abs(e-s)<Math.abs(t-s)?e:t);var d=e-s,c=n.find(t=>t.range===e);if(0===t.indexOf(e)&&s<e)l(c,d);else if(t.indexOf(e)===t.length-1)E.highestDiscountText&&(o.innerHTML=`<div>${E.highestDiscountText}</div>`);else{c=t.indexOf(e)+1;if(c){let e=t[c];d=n.find(t=>t.range===e);if(!e)return void(E.highestDiscountText&&(o.innerHTML=`<div>${E.highestDiscountText}</div>`));t=e-s;l(d,t)}}function l(t,e){let a;a="$"===t.type?`<span class="money">${theme.Currency.formatMoney(100*t.amount,E.moneyFormat)}</span>`:t.amount+"%",E.text&&(o.innerHTML=E.text.replaceAll("_COUNT_",`<strong class="text-secondary">${e}</strong>`).replaceAll("_DISCOUNT_AMOUNT_",`<strong class="text-secondary">${a}</strong>`))}a.forEach((t,e)=>{t=theme.helpers.safelyParseJson(t.dataset.blockSettings);if(t){var a=+t.range,r=t.discountCode,o=+t.discountAmount,n=t.discountType,i={name:r,type:n,amount:o},d=(0===s?theme.discountCode.removeAllDiscountsByName(r,{role:"cart-break",needUpdate:!1}):theme.discountCode.removeDiscount(r,{role:"cart-break",needUpdate:!1}),theme.discountCode.getStoredDiscounts()),d=q(theme.discountCode.getMostValuableDiscount(d,u),u),i=q(i,u);const c=t.giftWrapProductId;u.items.some(t=>t.product_id===c)&&s--,d<i&&i<=p&&s>=a&&theme.discountCode.addDiscount(r,n,o,{role:"cart-break"})}}),!function(){var t=document.querySelector("#CartDrawer .cart__total-price-info"),e=document.querySelector("#CartModal .cart__total-price-info"),t="drawer"===window.themeVariables.settings.cartType?t:e,e=document.querySelector(".cart__form .cart__total-price-info"),a=document.querySelector(".dbtfy-quantity-breaks__alert-drawer-wrapper");a&&a.remove();t&&!t.parentElement.querySelector(".dbtfy-quantity-breaks--cart-break")&&((a=r.querySelector(".dbtfy-quantity-breaks__text"))&&a.innerHTML&&t.insertAdjacentHTML("afterend",r.outerHTML),a=document.querySelector("#CartDrawer .dbtfy-quantity-breaks--cart-break"),t=document.querySelector("#CartModal .dbtfy-quantity-breaks--cart-break"),a="drawer"===window.themeVariables.settings.cartType?a:t)&&(t=a.querySelector(".dbtfy-quantity-breaks__alert"))&&""!==t.innerHTML.trim()&&a.classList.add("dbtfy-quantity-breaks__alert-drawer-wrapper");t=document.querySelector(".dbtfy-quantity-breaks__alert-wrapper");t&&t.remove();e&&!e.parentElement.querySelector(".dbtfy-quantity-breaks--cart-break")&&((a=r.querySelector(".dbtfy-quantity-breaks__text"))&&a.innerHTML&&e.insertAdjacentHTML("afterend",r.outerHTML),t=document.querySelector("#cartForm .dbtfy-quantity-breaks--cart-break"))&&(a=t.querySelector(".dbtfy-quantity-breaks__alert"))&&""!==a.innerHTML.trim()&&t.classList.add("dbtfy-quantity-breaks__alert-wrapper")}(),document.dispatchEvent(new CustomEvent("theme:addon:custom-currencies:convert-prices")),theme.discountCode.init()}}}function m(t){const u=t.target.closest(_.productSection);if(u){const g=u.querySelector(_.masterSelect);t=g?.querySelector("option:checked");const r=t?+t.value:null,l=u.querySelectorAll(_.quantity);var e,t=u.querySelector(_.productJSON);if(t){const f=JSON.parse(t.innerHTML),A=f.variants.find(t=>t.id===r);if(A){let r=c().variantsWithQuantities.reduce((t,e)=>t+e.quantity,0);function S(t,a,r,o){let n=t.querySelector(".dbtfy-quantity-breaks__variant-pickers-wrapper");n||((n=document.createElement("div")).classList.add("dbtfy-quantity-breaks__variant-pickers-wrapper"),t.appendChild(n)),n.innerHTML="";for(let e=0;e<r;e++){var i=document.querySelector(".dbtfy-color-swatches-container")?.cloneNode(!0),d=document.querySelector(".dbtfy-variant-picker")?.cloneNode(!0),c=u.querySelector(".dbtfy-inventory-quantity")?.cloneNode(!0),s=(i?.querySelectorAll("[id], [name], [for]").forEach(t=>{t.id&&(t.id=t.id+`--${o}-`+e),t.hasAttribute("for")&&t.setAttribute("for",t.getAttribute("for")+`--${o}-`+e),t.hasAttribute("name")&&t.setAttribute("name",t.getAttribute("name")+`--${o}-`+e)}),i?.querySelectorAll(".js-color-swatch").forEach(t=>{t.removeAttribute("data-has-change-event")}),d?.querySelectorAll("[id], [name], [for]").forEach(t=>{t.id&&(t.id=t.id+`--${o}-`+e),t.hasAttribute("for")&&t.setAttribute("for",t.getAttribute("for")+`--${o}-`+e),t.hasAttribute("name")&&"id[]"!=t.getAttribute("name")&&t.setAttribute("name",t.getAttribute("name")+`--${o}-`+e)}),d?.querySelector(_.masterSelect).classList.add("d-none"),i?.querySelectorAll(".text-strike").forEach(t=>{t.classList.remove("text-strike")}),d?.querySelectorAll(".text-strike").forEach(t=>{t.classList.remove("text-strike")}),d?.querySelector(_.masterSelect).options[a.selectedIndex]),i=`<div class="dbtfy-quantity-break__variant-content w-100">
            <div class="dbtfy-quantity-break__color-swatch dbtfy-color-swatches-container">${i?.innerHTML}</div>
            <div class="dbtfy-quantity-break__variant-picker">${d?.innerHTML}</div>
            <div class="dbtfy-quantity-break__inventory-quantity py-2">${c?.innerHTML}</div>
          </div>`,d=`<collapsible-tab class="collapsible-tab w-100">
            <details class="transition-input" data-block-id="{{ block.id }}">
              <summary>
                <div class="d-flex justify-content-between">
                  <div class="dbtfy-product-bullet-points__tab-header">
                    ${s?.textContent.trim()}
                  </div>
                  <span class="ms-2 flex-shrink-0">
                    <svg aria-hidden="true" data-prefix="material-icons" data-icon="angle-down" class="icon icon--svg arrow-down-svg" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path>
                    </svg>
                  </span>
                </div>
              </summary>
              <div class="collapsible-tab__content overflow-hidden">
                <div class="mb-3">
                  ${i}
                </div>
              </div>
            </details>
          </collapsible-tab>`;0==o&&1==r?n.innerHTML=i:n.innerHTML+=d}document.dispatchEvent(new CustomEvent("theme:addon:quantity-breaks:loaded")),n.classList.add("d-none"),n.closest("[data-product-quantity] .dbtfy-quantity-breaks").classList.remove("loaded-breaks"),f.has_only_default_variant&&n.classList.add("has-only-one-variant");{t=(t=n).querySelectorAll(_.masterSelect);let e=0;t.forEach(t=>{t=t.options[t.selectedIndex],t=parseFloat(t.getAttribute("data-price"))||0;e+=t})}}function a(){u.querySelector(".dbtfy-quantity-breaks__product-breaks").querySelectorAll(".dbtfy-quantity-breaks__radio").forEach(t=>{var e,a=t.closest(".dbtfy-quantity-breaks__quantity");a&&(a=a.querySelectorAll(".dbtfy-quantity-breaks__variant-pickers-wrapper [data-product-master-select]"),e=document.querySelector(".dbtfy-quantity-breaks .product-quantity__input"),t.checked?(t.dataset.range!=e.value&&(e.value=t.dataset.range,document.dispatchEvent(new Event("theme:section:product:quantity-sync"))),e.nextElementSibling.disabled=e.value>=r,e.previousElementSibling.disabled=e.value<=1,a.forEach(t=>{t.disabled=!1,t.closest(".dbtfy-quantity-breaks__variant-pickers-wrapper").classList.remove("d-none")})):a.forEach(t=>{t.disabled=!0,t.closest(".dbtfy-quantity-breaks__variant-pickers-wrapper").classList.add("d-none")}))}),p()}function b(){u.querySelector("[data-product-quantity] .dbtfy-quantity-breaks").classList.contains("loaded-breaks")&&u.querySelectorAll("[data-product-quantity] .dbtfy-quantity-breaks__quantity").forEach(t=>{let n=c().disabledVariants,o=c().availableVariants,i=c().variantsWithQuantities;t.querySelectorAll(".dbtfy-quantity-break__variant-content").forEach(t=>{if(o.length){t=t.querySelector(_.masterSelect);const e=t.options[t.selectedIndex],a=o.find(t=>t.id==e.value),r=i.findIndex(t=>t.id==e.value);-1!=r&&(--i[r].quantity,i[r].quantity<=0)&&(n.push(a),o=o.filter(t=>t!==a),i=i.filter((t,e)=>e!==r))}}),t.querySelectorAll(".dbtfy-quantity-break__variant-content").forEach(r=>{const o=n.map(t=>t?.options);var t=r.querySelectorAll(".js-color-swatch"),e=r.querySelectorAll("[data-product-option]:not([data-product-option-color])");let a=Number(r.querySelector(".js-swatch-label")?.dataset.optionIndex);a&&a--,t.forEach(t=>{const e=Array.from(r.querySelectorAll("[data-product-option-selector]:checked, select[data-product-option-selector]")).map(t=>t.value);e[a]=t.value,t.disabled=!t.checked&&o.some(t=>JSON.stringify(t)===JSON.stringify(e))}),e.forEach((t,e)=>{const a=Number(t.querySelector("[data-product-option-label]").dataset.optionIndex)-1;t.querySelectorAll("input[data-product-option-selector]:not([data-product-option-color])").forEach(t=>{const e=Array.from(r.querySelectorAll("[data-product-option-selector]:checked, select[data-product-option-selector]")).map(t=>t.value);e[a]=t.value,t.disabled=!t.checked&&o.some(t=>JSON.stringify(t)===JSON.stringify(e))}),t.querySelectorAll("[data-product-option-selector]:not([data-product-option-color]) option").forEach(t=>{const e=Array.from(r.querySelectorAll("[data-product-option-selector]:checked, select[data-product-option-selector]")).map(t=>t.value);e[a]=t.value,t.disabled=!t.checked&&o.some(t=>JSON.stringify(t)===JSON.stringify(e))})})})})}function d(e){var t=u.querySelector(_.masterSelect).querySelector(`option[value="${e.id}"]`),t=theme.helpers.safelyParseJson(t.dataset.variantSettings);let a=0;return 0<(a="shopify"===e.inventory_management&&"continue"!==t.inventoryPolicy?t.inventoryQuantity||0:30)&&k.length&&(t=k.find(t=>t.id==e.id)?.quantity||0,a-=t),a}function c(){let t=f.variants.filter(t=>0==t.available),a=f.variants.filter(t=>t.available);a.forEach(e=>{d(e)<=0&&(t.push(e),a=a.filter(t=>t!==e))});var e=a.map(t=>({id:t.id,quantity:d(t)}));return{availableVariants:a,disabledVariants:t,variantsWithQuantities:e}}function p(){u.querySelector(".dbtfy-quantity-breaks__radio:checked").closest(".dbtfy-quantity-breaks__quantity").querySelectorAll(_.masterSelect).forEach(t=>{var a=t.closest(".dbtfy-quantity-break__variant-content").querySelector(".dbtfy-quantity-break__inventory-quantity");const e=t.options[t.selectedIndex];t=f.variants.find(t=>t.id==e.value);{var r=t;t=window.themeVariables.settings.addons.inventoryQuantity.thresholdQuantity;let e=d(r);e<=t?a.removeAttribute("hidden"):a.setAttribute("hidden","hidden"),a.querySelectorAll(".dbtfy-inventory-quantity__item").forEach(t=>{r.id==t.dataset.variantId?(t.removeAttribute("hidden"),t.querySelector(".dbtfy-inventory-quantity__quantity").textContent=e):t.setAttribute("hidden","hidden")})}})}function o(){u.querySelector("[data-product-quantity] .dbtfy-quantity-breaks").classList.contains("loaded-breaks")||(u.querySelectorAll("[data-product-quantity] .dbtfy-quantity-breaks__quantity").forEach(t=>{let n=0;const i=c().availableVariants;t.querySelectorAll(".dbtfy-quantity-break__variant-content").forEach(o=>{if(i.length){var t=o.querySelector(_.masterSelect),e=i[0],a=d(e);let r=Number(o.querySelector(".js-swatch-label")?.dataset.optionIndex);r&&r--,e.options.forEach((t,e)=>{o.querySelectorAll(".js-color-swatch").length&&e==r&&!(a=o.querySelector(`.js-color-swatch[value="${t}"]`)).checked&&(a.checked=!0,a.dispatchEvent(new Event("change")));var a=o.querySelector(`[data-product-option-selector][value="${t}"]`),a=(!a||a.checked||(a.checked=!0,a.dispatchEvent(new Event("change")),a.closest("[data-product-option]").querySelector(".text-sub").textContent=t),o.querySelectorAll("select[data-product-option-selector]"));a.length&&a[e].value!=t&&(a[e].value=t,a[e].dispatchEvent(new Event("change")),a[e].closest("[data-product-option]").querySelector(".text-sub").textContent=t)}),t.value=e.id,t.dispatchEvent(new Event("change")),(n+=1)==a&&(n=0,i.shift())}})}),u.querySelector("[data-product-quantity] .dbtfy-quantity-breaks").classList.add("loaded-breaks"),b())}function n(){l.forEach(t=>{t.querySelector(".dbtfy-quantity-breaks__radio").dataset.range>r&&t.remove()})}function i(){(u.querySelector(".dbtfy-quantity-breaks__product-breaks")?.querySelectorAll(".dbtfy-quantity-breaks__quantity")).forEach(l=>{const y=l.querySelectorAll(_.masterSelect);y.forEach(u=>{u.hasAttribute("data-has-change-event")||(u.addEventListener("change",()=>{var t=u.options[u.selectedIndex];const a=f.variants.find(t=>t.id===Number(u.value));u.closest(".dbtfy-quantity-break__variant-picker").querySelectorAll("[data-product-option]").forEach((t,e)=>{t.querySelector(".text-sub").textContent=a.options[e]});var e=u.closest(".collapsible-tab")?.querySelector(".dbtfy-product-bullet-points__tab-header"),r=l.querySelector(".dbtfy-quantity-breaks__original-price .money"),o=l.querySelector(".dbtfy-quantity-breaks__discounted-price .money"),n=(e&&(e.textContent=t?.textContent.trim()),Array.from(y).reduce((t,e)=>{e=e.options[e.selectedIndex];return t+(theme.helpers.safelyParseJson(e?.dataset.variantSettings)?.variantPrice||0)},0)),e=Array.from(y).reduce((t,e)=>{const a=Number(e.value);e=f.variants.find(t=>t.id===a);return t+(e.compare_at_price||e.price)},0),t=l.querySelector("input"),i=t.dataset.discountType,d=+t.dataset.discountAmount;let c=null;switch(i){case"$":c=n-100*d;break;case"%":var s=Math.floor(n/100*d);c=n-s}r.classList.remove("hidden"),c?(r.innerHTML=theme.Currency.formatMoney(n,E.moneyFormat),o.innerHTML=theme.Currency.formatMoney(c,E.moneyFormat)):(r.innerHTML=n<e?theme.Currency.formatMoney(e,E.moneyFormat):"",o.innerHTML=theme.Currency.formatMoney(n,E.moneyFormat),e<=n&&r.classList.add("hidden")),b(),p()}),u.setAttribute("data-has-change-event","true"))})})}function s(){(u.querySelector(".dbtfy-quantity-breaks__product-breaks")?.querySelectorAll(".dbtfy-quantity-breaks__quantity")).forEach(t=>{t.querySelectorAll("[data-product-option-selector]").forEach(r=>{r.hasAttribute("data-has-change-event")||(r.addEventListener("change",()=>{var t=r.closest(".dbtfy-quantity-break__variant-picker"),e=t.querySelector(_.masterSelect),t=t.querySelectorAll("select[data-product-option-selector], input[data-product-option-selector]:checked");let a={option1:null,option2:null,option3:null};t.forEach(t=>{a[t.dataset.index]=t.value});t=Array.from(e.querySelectorAll("option")).find(t=>{t=theme.helpers.safelyParseJson(t.dataset.variantSettings);return t&&a.option1===t.option1&&a.option2===t.option2&&a.option3===t.option3});t&&(e.value=t.value,e.dispatchEvent(new Event("change")))}),r.setAttribute("data-has-change-event","true"))})})}r?(u.querySelector(".product__meta")?.classList.remove("product__meta--sold-out"),l.forEach((t,e)=>{var a=t.querySelector("label"),r=t.querySelector("input"),o=+r.dataset.range,n=r.dataset.discountType,i=+r.dataset.discountAmount,d=r.getAttribute("data-product-break-tag-1"),c=r.getAttribute("data-product-break-tag-1-background-color"),s=r.getAttribute("data-product-break-tag-1-text-color"),u=r.getAttribute("data-product-break-tag-1-border-color"),l=r.getAttribute("data-product-break-tag-2"),y=r.getAttribute("data-product-break-tag-2-background-color"),b=r.getAttribute("data-product-break-tag-2-text-color"),r=r.getAttribute("data-product-break-tag-2-border-color");let p=A.price,f=A.compare_at_price;var m=E.singleBreakText,q=E.singleBreakSubtext,v=E.singleBreakSubtextBreaks;let h="",_=(S(t,g,o,e),`
          ${l&&"null"!==l?`
            <div style="border: 1px solid ${r}; background-color: ${y}; color: ${b};" class="dbtfy-quantity-breaks__product-badge-top">
              <span>${l}</span>
            </div>
          `:""}
  
          <div class="dbtfy-quantity-breaks__left-wrapper">
            <div class="dbtfy-quantity-breaks__left-wrapper-buy-label-container h4">
              <div class="dbtfy-quantity-breaks_buy-label-container">${m}</div>
              <div class="dbtfy-quantity-breaks_tag-container">
                <div class="dbtfy-quantity-breaks_tag-container">
                  ${d&&"null"!==d?`
                    <div style="border: 1px solid ${u}; background-color: ${c}; color: ${s};" class="dbtfy-quantity-breaks__product-badge badge">
                      <span>${d}</span>
                    </div>
                  `:""}
                </div>
              </div>
            </div>
            
            <div class="dbtfy-quantity-breaks__left-wrapper-saved-amount-container">
              _SAVED_AMOUNT_
            </div>
          </div>
          
          <div class="dbtfy-quantity-breaks__right-wrapper">
            <div class="dbtfy-quantity-breaks__right-wrapper-price-container">
              _PRICE_
            </div>
          </div>
        `);if(_=_.replace("_COUNT_",o),1<o)switch(f=p*o,n){case"$":h=`<span class="money">${theme.Currency.formatMoney(100*i,E.moneyFormat)}</span>`,p=f-100*i;break;case"%":var k=Math.floor(f/100*i);p=f-k,h=i+"%"}1<o&&!i||p<0||f<0?t.setAttribute("data-invalid-value","true"):t.removeAttribute("data-invalid-value"),_=_.replace("_PRICE_",`
            <span class="dbtfy-quantity-breaks__price text-accent">
              <span class="dbtfy-quantity-breaks__discounted-price h4 on-sale text-sale" data-price="${p}">
                <span class="money">
                  ${theme.Currency.formatMoney(p,E.moneyFormat)}
                </span>
              </span>

              <span class="dbtfy-quantity-breaks__original-price text-strike" data-compare-price="${f||""}">
                <span class="money${f&&0!=f?"":" hidden"}">
                  ${f&&0!=f?theme.Currency.formatMoney(f,E.moneyFormat):""}
                </span>
              </span>
            </span>
          `),_=1<o?_.replace("_SAVED_AMOUNT_",`
            <span class="dbtfy-quantity-breaks__saved-amount">
              <div class="dbtfy-quantity-breaks__save_label">
                ${v.replace("_SAVED_AMOUNT_",h)}
              </div>
            </span>
          `):q?_.replace("_SAVED_AMOUNT_",`<div class="dbtfy-quantity-breaks__save_label">${q}</div>`):_.replace("dbtfy-quantity-breaks__left-wrapper-saved-amount-container","dbtfy-quantity-breaks__left-wrapper-saved-amount-container d-none"),a.innerHTML=_}),(u.querySelector(".dbtfy-quantity-breaks__product-breaks")?.querySelectorAll(".dbtfy-quantity-breaks__radio")).forEach(t=>{t.hasAttribute("data-has-change-event")||(t.addEventListener("change",a),t.setAttribute("data-has-change-event","true"))}),a(),i(),s(),n(),t=u.querySelector("[data-product-quantity-input]"),e=u.querySelectorAll("[data-product-quantity-button]"),t&&(t.removeAttribute("data-product-quantity-input"),t.setAttribute("min",1),t.setAttribute("max",r),t.addEventListener("change",t=>{t.preventDefault();var t=t.target.value,e=(u.querySelector("[data-product-quantity-button-plus]").disabled=t>=r,u.querySelector("[data-product-quantity-button-minus]").disabled=t<=1,u.querySelectorAll(_.quantity));let a=[];e.forEach(t=>{t=t.querySelector(".dbtfy-quantity-breaks__radio").dataset.range;1<t&&a.push(t)}),a.includes(t)?(u.querySelector(`.dbtfy-quantity-breaks__radio[data-range="${t}"]`).checked=!0,u.querySelector(`.dbtfy-quantity-breaks__radio[data-range="${t}"]`).dispatchEvent(new Event("change"))):(e[0].querySelector(".dbtfy-quantity-breaks_buy-label-container").textContent=E.singleBreakText.replace("_COUNT_",t),e[0].querySelector(".dbtfy-quantity-breaks__radio").dataset.range=t,S(e[0],g,t,0),i(),s(),e[0].querySelector(".dbtfy-quantity-breaks__radio").checked=!0,e[0].querySelector(".dbtfy-quantity-breaks__radio").dispatchEvent(new Event("change")),e[0].querySelector(_.masterSelect).dispatchEvent(new Event("change")),o())}),e.forEach(t=>{t.removeAttribute("data-product-quantity-button")})),theme.helpers.loadComponent("variants",()=>{setTimeout(()=>{o()},100)}),document.querySelector(".dbtfy-color-swatches-container")?.classList.add("d-none"),document.querySelector(".dbtfy-variant-picker")?.classList.add("d-none"),document.querySelector(".dbtfy-variant-picker [data-product-master-select]").disabled=!0,document.dispatchEvent(new CustomEvent("theme:addon:custom-currencies:convert-prices"))):(n(),theme.helpers.loadComponent("variants",()=>{u.querySelector(".product__meta")?.classList.add("product__meta--sold-out"),u.querySelector(".dbtfy-color-swatches-container").classList.add("d-none"),u.querySelector(".dbtfy-variant-picker").classList.add("d-none")}))}}}}function q(t,e,a){var r=a||e.items_subtotal_price;let o=0;if(t)switch(t.type){case"$":o=100*t.amount;break;case"%":o=r*(t.amount/100)}return o}e(),document.addEventListener("theme:addon:upsell-popup:loaded",()=>{e()}),document.addEventListener("theme:cart:loaded",t=>{e()}),setTimeout(()=>{document.querySelectorAll("[data-testid]").forEach(i=>{const d=i.closest(_.productSection);d&&d.querySelector(_.productBreaks)&&i.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();var t=d.querySelectorAll(_.quantity),e=d.querySelector(_.masterSelect)?.querySelector("option:checked");const a=e?+e.value:null;let r="";t.forEach(t=>{t=t.querySelector("input:checked");t&&(r={variantID:a,quantity:+t.value,discountCode:t.dataset.discountCode,discountType:t.dataset.discountType,discountAmount:t.dataset.discountAmount})});var o=i,e=r;if(e){let r=`${window.location.origin}/cart/${e.variantID}:${e.quantity}?locale=`+Shopify.locale;const n=o.dataset.testid.toLowerCase();["amazon","apple","google","paypal","shop","venmo"].forEach(t=>{let e=!1;var a;(e=n.includes(t)||(a=o.querySelector("[role='button']"))&&a.dataset.testid.toLowerCase().includes(t)?!0:e)&&(a=t+"_pay",r=r+"&payment="+a)}),window.location.assign(r)}},!0)})},1e3)}}}document.body.classList.add("dbtfy-quantity-breaks-enabled"),e(()=>{a()}),document.addEventListener("shopify:section:load",t=>{e(()=>{a()})}),document.addEventListener("theme:discount:applied",t=>{e(()=>{a()})})}();