class LiteYTEmbed extends HTMLElement{connectedCallback(){this.videoId=this.getAttribute("videoid");let e=this.querySelector(".lty-playbtn");var t;this.playLabel=e&&e.textContent.trim()||this.getAttribute("playlabel")||"Play",e||((e=document.createElement("button")).type="button",e.classList.add("lty-playbtn"),e.setAttribute("aria-label","Click to open Youtube video"),this.append(e)),e.textContent||((t=document.createElement("span")).className="lyt-visually-hidden",t.textContent=this.playLabel,e.append(t)),e.removeAttribute("href"),this.addEventListener("pointerover",LiteYTEmbed.warmConnections,{once:!0}),this.addEventListener("click",this.addIframe),this.needsYTApiForAutoplay=navigator.vendor.includes("Apple")||navigator.userAgent.includes("Mobi")}static addPrefetch(e,t,a){var n=document.createElement("link");n.rel=e,n.href=t,a&&(n.as=a),document.head.append(n)}static warmConnections(){LiteYTEmbed.preconnected||(LiteYTEmbed.addPrefetch("preconnect","https://www.youtube-nocookie.com"),LiteYTEmbed.addPrefetch("preconnect","https://www.google.com"),LiteYTEmbed.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),LiteYTEmbed.addPrefetch("preconnect","https://static.doubleclick.net"),LiteYTEmbed.preconnected=!0)}fetchYTPlayerApi(){window.YT||window.YT&&window.YT.Player||(this.ytApiPromise=new Promise((t,e)=>{var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api",a.async=!0,a.onload=e=>{YT.ready(t)},a.onerror=e,this.append(a)}))}async addYTPlayerIframe(e){var e=e||new URLSearchParams([]),t=(e.append("autoplay","1"),e.append("playsinline","1"),e.append("enablejsapi","1"),e.append("mute","1"),this.fetchYTPlayerApi(),await this.ytApiPromise,document.createElement("div")),e=Object.fromEntries(e.entries());new YT.Player(t,{width:"100%",videoId:this.videoId,playerVars:e,events:{onReady(e){e.target.playVideo()}}}),document.body.insertAdjacentElement("beforeend",t)}async addIframe(){var e,t;this.classList.contains("lyt-activated")||(this.classList.add("lyt-activated"),(e=new URLSearchParams(this.getAttribute("params")||[])).append("autoplay","1"),e.append("playsinline","1"),e.append("enablejsapi","1"),t=document.createElement("iframe"),this.needsYTApiForAutoplay&&e.append("mute","1"),t.width=560,t.height=315,t.title=this.playLabel,t.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",t.allowFullscreen=!0,t.src=`https://www.youtube-nocookie.com/embed/${encodeURIComponent(this.videoId)}?`+e.toString(),this.append(t),t.focus())}}customElements.define("lite-youtube",LiteYTEmbed);