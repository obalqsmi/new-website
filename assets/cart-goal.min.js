!function(){const A={},a={addonSection:".dbtfy-cart-goal",goal:".dbtfy-cart-goal__goal"};function t(h){var e=document.querySelector(a.addonSection);if(e){const t=e.querySelectorAll(a.goal);t.length&&(e=theme.helpers.safelyParseJson(e.dataset.sectionSettings))&&(A.text=e.text,A.reachedText=e.reachedText,theme.helpers.getUserLocationData().then(r=>{const o=r.country?.handle;if(o){r=Object.entries({Europe:["AD","AL","AT","AX","BA","BE","BG","BY","CH","CY","CZ","DE","DK","EE","ES","FI","FO","FR","GB","GG","GI","GR","HR","HU","IE","IM","IS","IT","JE","LI","LT","LU","LV","MC","MD","ME","MK","MT","NL","NO","PL","PT","RO","RS","SE","SI","SJ","SK","SM","UA","VA","XK"],Asia:["AE","AF","AM","AZ","BD","BH","BN","BT","CC","CN","CX","GE","HK","ID","IL","IN","IO","IQ","IR","JO","JP","KG","KH","KP","KR","KW","KZ","LA","LB","LK","MM","MN","MO","MV","MY","NP","OM","PH","PK","PS","QA","RU","SA","SG","SY","TH","TJ","TM","TR","TW","UZ","VN","YE"],"North america":["AG","AI","AW","BB","BL","BM","BQ","BS","BZ","CA","CR","CU","CW","DM","DO","GD","GL","GP","GT","HN","HT","JM","KN","KY","LC","MF","MQ","MS","MX","NI","PA","PM","PR","SV","SX","TC","TT","US","VC","VG","VI"],Africa:["AO","BF","BI","BJ","BW","CD","CF","CG","CI","CM","CV","DJ","DZ","EG","EH","ER","ET","GA","GH","GM","GN","GQ","GW","KE","KM","LR","LS","LY","MA","MG","ML","MR","MU","MW","MZ","NA","NE","NG","RE","RW","SC","SD","SH","SL","SN","SO","SS","ST","SZ","TD","TG","TN","TZ","UG","YT","ZA","ZM","ZW"],Antarctica:["AQ","BV","GS","HM","TF"],"South america":["AR","BO","BR","CL","CO","EC","FK","GF","GY","PE","PY","SR","UY","VE"],Oceania:["AS","AU","CK","FJ","FM","GU","KI","MH","MP","NC","NF","NR","NU","NZ","PF","PG","PN","PW","SB","TK","TL","TO","TV","UM","VU","WF","WS"]}).find(e=>{return e[1].includes(o)});const m=r?r[0]:null,S=Array.from(t).find(e=>{var t,a=theme.helpers.safelyParseJson(e.dataset.blockSettings);if(a)return a=a.region,a=theme.helpers.capitalizeFirstLetter(a),t=theme.helpers.capitalizeFirstLetter(o),a===theme.helpers.capitalizeFirstLetter(m)||a===t||"All"===a?e:void 0});if(t.forEach(e=>{e!==S&&e.remove()}),S){r=theme.helpers.safelyParseJson(S.dataset.blockSettings);if(r){var n=S.querySelector(".dbtfy-cart-goal__goal-wrapper"),s=S.querySelector(".dbtfy-cart-goal__goal-text"),c=S.querySelector(".dbtfy-cart-goal__goal-progress-bar"),r=r.goalAmount,l=h.total_price/100,i=parseFloat(r-l);let e=0,t=`<span>${A.reachedText}</span>`;0<i?(d=window.themeVariables.settings.moneyFormat,e=100*(r-i)/r,t=`
          <span>
            ${A.text.replace("{amount}",`
              <span class="dbtfy-cart-goal__goal-amount text-accent text-secondary">
                <span class="money">${theme.Currency.formatMoney(100*i,d)}</span>
              </span>
            `)}
          </span>`):e=100,s.innerHTML=t,c.style.width=e+"%",n.removeAttribute("hidden"),h?h.item_count||n.setAttribute("hidden","hidden"):0==l&&n.setAttribute("hidden","hidden");const M=S.cloneNode(!0);if(M.classList.remove("dbtfy-cart-goal__goal"),M.classList.add("dbtfy-cart-goal"),document.body.classList.contains("template-cart")){r=document.querySelector(".cart .page-title")?.parentElement,i=r?.parentElement.querySelectorAll(".dbtfy-cart-goal");if(i&&i.forEach(e=>{e.remove()}),r){const M=S.cloneNode(!0);M.classList.remove("dbtfy-cart-goal__goal"),M.classList.add("dbtfy-cart-goal"),r.insertAdjacentElement("afterend",M)}}let a;"drawer"===window.themeVariables.settings.cartType?a="#CartDrawer":"modal"===window.themeVariables.settings.cartType&&(a="#CartModal");var d=document.querySelector(a),s=d?.querySelector(".cart-products");d&&s&&((c=s.previousSibling)&&c.classList.contains("dbtfy-cart-goal")&&c.remove(),M.classList.add("drawer__inner-section"),s.insertAdjacentElement("beforebegin",M)),document.dispatchEvent(new CustomEvent("theme:addon:custom-currencies:convert-prices"))}}}}))}}theme.isCartLoaded?t(theme.cart):document.addEventListener("theme:cart:initially-loaded",e=>{t(theme.cart)}),document.addEventListener("theme:cart:loaded",e=>{t(e.detail.cart)})}();