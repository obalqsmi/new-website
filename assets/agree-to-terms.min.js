!function(){const i={warning:{addonStrings:window.themeVariables.strings.addons.agreeToTerms}.addonStrings.warning},u={section:".dbtfy-agree-to-terms",input:".dbtfy-agree-to-terms__input",warningMessage:".dbtfy-agree-to-terms__error-message"};function t(){theme.requiredToCheckoutAddons.init("agree-to-terms"),document.querySelectorAll(u.section).forEach(e=>{const r=e.querySelector(u.input);r&&(r.addEventListener("change",()=>{var e=document.querySelectorAll(u.input),t=document.querySelectorAll(u.warningMessage);r.checked?(localStorage.setItem("agreeTerms","true"),e.forEach(e=>{e.checked=!0}),t.forEach(e=>{e.setAttribute("hidden","hidden")}),theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!1,isChanged:!0})):(localStorage.removeItem("agreeTerms"),e.forEach(e=>{e.checked=!1}),theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!0,isChanged:!0}))}),localStorage.agreeTerms?(r.checked=!0,theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!1})):theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!0}))}),document.querySelectorAll("[name='checkout'], [name='goto_pp'], [name='goto_gc']").forEach(c=>{function e(e){var e=e.closest("form")?.querySelector(u.section);e&&e.querySelector(u.input).checked&&(e={attributes:{"Accepted terms at":new Date}},fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}))}c.hasAttribute("data-has-agree-click")||(c.addEventListener("mouseenter",()=>{e(c)}),c.addEventListener("touchstart",()=>{e(c)}),c.addEventListener("click",t=>{const r=c.closest("form");var o=r?.querySelector(u.section);if(o){var n=o.querySelector(u.input),a=o.querySelector(u.warningMessage),s=document.querySelectorAll(u.warningMessage);if(n.checked)theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!1,isCheckoutButtonEventHandled:!0,button:{element:c,event:t}}),s.forEach(e=>{e.setAttribute("hidden","hidden")});else if(theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!0,isCheckoutButtonEventHandled:!0,button:{element:c,event:t}}),a){a.innerHTML=i.warning,a.removeAttribute("hidden");let e;"drawer"===window.themeVariables.settings.cartType?e="#CartDrawer":"modal"===window.themeVariables.settings.cartType&&(e="#CartModal");n=c.closest(e),s=document.body.classList.contains("template-cart"),t=n?.querySelector(".drawer__header"),a=n?.querySelector(".drawer__inner");const r=n?.querySelector("form");var o=o.offsetTop||0,t=t?.innerHeight||0,d=r?.offsetTop||0;n&&(n.classList.contains("js-drawer-open")||n.classList.contains("js-modal-open"))?a.scrollTo({top:o-t-d-15,behavior:"smooth"}):s&&(n=document.querySelector(".header"),o=(a=document.querySelector(".cart__form"))?.querySelector(u.section),t=document.body.classList.contains("sticky-header"),d=a?.offsetTop||0,s=o?.offsetTop||0,a=t?n.innerHeight:0,window.scrollTo({top:d+s-a,behavior:"smooth"}))}}}),c.setAttribute("data-has-agree-click","true"))})}document.body.classList.add("dbtfy-agree-to-terms-enabled"),theme.helpers.loadComponent("requiredToCheckout",()=>{t()}),document.addEventListener("theme:cart:loaded",e=>{theme.helpers.loadComponent("requiredToCheckout",()=>{t()})})}();