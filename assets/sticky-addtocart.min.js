!function(){var e;const c={saleType:{settings:window.themeVariables.settings}.settings.saleType,moneyFormat:window.themeVariables.settings.moneyFormat},d={addonSection:".dbtfy-sticky-addtocart",image:".dbtfy-sticky-addtocart__image img",bar:".dbtfy-sticky-addtocart__bar",quantity:".dbtfy-sticky-addtocart__quantity",select:".dbtfy-sticky-addtocart__select",totalPrice:".dbtfy-sticky-addtocart__price--total",comparePrice:".dbtfy-sticky-addtocart__price--compare",discountSaved:".dbtfy-sticky-addtocart__discount-saved",discountSavedText:".dbtfy-sticky-addtocart__discount-saved-text"},u={enabledAddon:"dbtfy-sticky-addtocart-enabled",stickyBarBottomVisible:"dbtfy-sticky-addtocart-bar-bottom-visible",stickyBarVisible:"dbtfy-sticky-addtocart__bar--visible"},l=(document.body.classList.add(u.enabledAddon),document.querySelector(d.addonSection));function y(){var e,t=l.querySelector(d.select)?.selectedOptions[0];t&&(t=theme.helpers.safelyParseJson(t.dataset.variantSettings)?.image,e=l.querySelector(d.image))&&t&&!t.includes("no-image")&&(e.setAttribute("src",t),e.setAttribute("srcset",t+" 100w"))}function m(){var e,t,o,s,a=l.querySelector(d.select)?.selectedOptions[0];a&&(e=document.querySelector(".product.section")?.querySelector(".product__meta"),t=l.querySelector("[data-product-add-to-cart]"),o=l.querySelector("[data-product-add-to-cart-text]"),s=theme.helpers.safelyParseJson(a.dataset.variantSettings),a=a.hasAttribute("data-remain-qty")?+a.dataset.remainQty:+s.productQty,s=!e||!e.classList.contains("product__meta--sold-out"),t&&o&&(0<a&&s?(t.removeAttribute("disabled"),o.innerHTML=window.themeVariables.strings.addToCartButton):(t.setAttribute("disabled","disabled"),o.innerHTML=window.themeVariables.strings.soldOutButton)),document.dispatchEvent(new CustomEvent("stickyATCButtonStateChanged")))}function p(){var t=l.querySelector(d.totalPrice),o=l.querySelector(d.comparePrice),s=l.querySelector(d.select),s=s?.options[s.selectedIndex];if(s){s=theme.helpers.safelyParseJson(s.dataset.variantSettings);if(s){var a,r=s.price,s=s.comparePrice;t.innerHTML=`<span class="money">${theme.Currency.formatMoney(r,c.moneyFormat)}</span>`,r<s?(o.innerHTML=`<span class="money">${theme.Currency.formatMoney(s,c.moneyFormat)}</span>`,o.removeAttribute("hidden")):o.setAttribute("hidden","hidden");{o=t;t=r;r=s;let e=null;var s=l.querySelector(d.discountSaved),n=l.querySelector(d.discountSavedText);s&&s.setAttribute("hidden","hidden");o.classList.remove("text-sale"),r<=t||("percentage"===c.saleType?(a=Math.round(100*(r-t)/r))<=100&&(e=a+"%"):0<(a=r-t)&&(e=`<span class="money">${theme.Currency.formatMoney(a,c.moneyFormat)}</span>`),e&&(o.classList.add("text-sale"),n&&(n.innerHTML=window.themeVariables.strings.save.replace("{{ saved_amount }}",e)),s)&&s.removeAttribute("hidden"))}document.dispatchEvent(new CustomEvent("theme:addon:custom-currencies:convert-prices"))}}}l&&(e=theme.helpers.safelyParseJson(l.dataset.sectionSettings))&&(c.productHandle=e.productHandle,c.position=e.position,c.triggerType=e.triggerType,c.scrollDepthPercentage=e.scrollDepthPercentage,theme.helpers.loadComponents(["productQuantities","syncVariantImage"],()=>{{let r=!1;window.addEventListener("scroll",e=>{var t=document.querySelector(".product.section"),o=t?.querySelector(".product__meta"),s=t?.querySelector("[data-product-add-to-cart]");if(t&&o&&s){const a=document.querySelector(d.bar);var t=window.pageYOffset,o=s.offsetTop+s.offsetHeight;"default"===c.triggerType?o<t?(a.classList.add(u.stickyBarVisible),"bottom"===c.position&&(document.body.classList.add(u.stickyBarBottomVisible),document.documentElement.style.setProperty("--sticky-atc-offset",a.offsetHeight+"px")),r=!0):r&&(r=!1,theme.helpers.closeTransition({elementToTransition:a},function(){a.classList.remove(u.stickyBarVisible),"bottom"===c.position&&document.body.classList.remove(u.stickyBarBottomVisible)})):(s=document.body,o=document.documentElement,t=Math.max(s.scrollHeight,s.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight),s=Math.floor(t/100*c.scrollDepthPercentage),window.scrollY>s?(a.classList.add(u.stickyBarVisible),"bottom"===c.position&&(document.body.classList.add(u.stickyBarBottomVisible),document.documentElement.style.setProperty("--sticky-atc-offset",a.offsetHeight+"px")),r=!0):r&&(r=!1,theme.helpers.closeTransition({elementToTransition:a},function(){a.classList.remove(u.stickyBarVisible),"bottom"===c.position&&document.body.classList.remove(u.stickyBarBottomVisible)})))}})}y(),p(),m();{const r=l.querySelector(d.select);r&&r.addEventListener("change",async e=>{var t,o,s,a=r?.selectedOptions[0];a&&(a=theme.helpers.safelyParseJson(a.dataset.variantSettings),o=(t=l.querySelector(d.quantity))?.querySelector("input"),s=l.querySelector(d.totalPrice),a=a.price,y(),theme.ProductQuantities.setMaxQuantity(t,o,r),theme.ProductQuantities.checkQuantity(t,o,r),theme.ProductQuantities.syncQuantityInputs(o),m(),s.innerHTML=`<span class="money">${theme.Currency.formatMoney(a,c.moneyFormat)}</span>`,p(),document.dispatchEvent(new CustomEvent("theme:addon:custom-currencies:convert-prices")),theme.SyncProductVariant(r))})}{const t=document.querySelector("[data-product-master-select]"),o=l.querySelector(d.select),e=document.querySelector(".product.section"),s=e?.querySelector(".product__meta");o&&t&&s&&t.addEventListener("change",e=>{o.querySelector(`option[value="${t.value}"]`)&&o.value!==t.value&&(o.value=t.value,y(),m(),p())})}document.addEventListener("theme:section:product:quantity-sync",()=>{var e=l.querySelector(d.quantity),t=e?.querySelector("input"),o=l.querySelector(d.select);e&&t&&o&&theme.ProductQuantities.checkQuantity(e,t,o)}),document.addEventListener("theme:cart:loaded",()=>{var e=l.querySelector(d.quantity),t=e?.querySelector("input"),o=l.querySelector(d.select);e&&t&&o&&(theme.ProductQuantities.setVariantQuantities(e,t,o),p(),m())}),document.addEventListener("updatedProductRemainingQuantities",()=>{m()}),document.addEventListener("productInfoLoaded",()=>{m()});{const a=l.querySelector(d.quantity);if(a){const n=a.querySelector("input"),i=l.querySelector(d.select);theme.ProductQuantities.setMaxQuantity(a,n,i),theme.ProductQuantities.setVariantQuantities(a,n,i),theme.ProductQuantities.syncQuantityInputs(n),theme.ProductQuantities.checkQuantity(a,n,i),n?.addEventListener("change",e=>{theme.ProductQuantities.checkQuantity(a,n,i),theme.ProductQuantities.syncQuantityInputs(n)}),n?.addEventListener("keydown",e=>{e=e.code;"ArrowUp"!==e&&"ArrowDown"!==e&&!e.includes("Digit")||setTimeout(()=>{theme.ProductQuantities.checkQuantity(a,n,i),theme.ProductQuantities.syncQuantityInputs(n)})})}}}))}();