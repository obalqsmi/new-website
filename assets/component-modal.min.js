window.theme=window.theme||{},theme.Modal=function(){let e={modal:document.querySelectorAll(".modal"),openModalButton:document.querySelectorAll("[data-modal-open]"),closeModalButton:document.querySelectorAll("[data-modal-close]")},t={openClass:"js-modal-open"};function o(e){e&&!e.classList.contains(t.openClass)&&(e.classList.add(t.openClass),document.body.classList.add(t.openClass),theme.helpers.trapFocus({container:e.querySelector(".modal__content")}),e.dispatchEvent(new CustomEvent("modal.open")))}function a(e){e&&e.classList.contains(t.openClass)&&(document.activeElement.dispatchEvent(new Event("blur")),theme.helpers.closeTransition({elementToTransition:e}),e.classList.remove(t.openClass),theme.helpers.closeTransition({elementToTransition:document.body}),document.body.classList.remove(t.openClass),theme.helpers.removeTrapFocus({container:e.querySelector(".modal__content")}),e.dispatchEvent(new CustomEvent("modal.close")))}return{init:function(){(e={modal:document.querySelectorAll(".modal"),openModalButton:document.querySelectorAll("[data-modal-open]:not([data-has-modal-click-event])"),closeModalButton:document.querySelectorAll("[data-modal-close]:not([data-has-modal-click-event])")}).openModalButton.forEach(t=>{t.addEventListener("click",()=>{var e=t.dataset.modalOpen;o(e?document.querySelector(e):null)}),t.setAttribute("data-has-modal-click-event","true")}),e.closeModalButton.forEach(t=>{t.addEventListener("click",()=>{var e=t.dataset.modalClose;a(e?document.querySelector(e):null)}),t.setAttribute("data-has-modal-click-event","true")}),document.body.addEventListener("keyup",e=>{27===e.keyCode&&(e=document.querySelector(".modal."+t.openClass))&&!e.hasAttribute("data-modal-no-close")&&a(e)}),e.modal.forEach(o=>{o.addEventListener("click",e=>{var t=o.querySelector(".modal__dialog");o.hasAttribute("data-modal-no-close")||e.target!==o&&e.target!==t||a(o)})})},open:o,close:a}}();