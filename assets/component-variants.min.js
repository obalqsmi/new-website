window.theme=window.theme||{},theme.Variants=function(){function t(t){this.container=t.container,this.product=t.product,this.singleOptionSelector=t.singleOptionSelector,this.masterSelect=t.masterSelect,this.enableHistoryState=t.enableHistoryState,this.options=this.container.querySelectorAll(this.singleOptionSelector),this.currentVariant=this.getVariantFromOptions(),this.options.forEach(t=>{t.addEventListener("change",()=>{this.onSelectChange()})})}return t.prototype=Object.assign({},t.prototype,{getCurrentOptions:function(){return Array.from(this.options).map(t=>{var e=t.getAttribute("type"),i={};return("radio"!==e&&"checkbox"!==e||!!t.checked)&&(i.value=t.value,i.index=t.dataset.index,i)}).filter(t=>t)},getVariantFromOptions:function(){const t=this.getCurrentOptions();return this.product.variants.find(e=>t.every(t=>e[t.index]===t.value))},onSelectChange:function(){var t=this.getVariantFromOptions();this.container.dispatchEvent(new CustomEvent("variantChange",{detail:{variant:t}})),t&&(this.updateMasterSelect(t),this.updateMedia(t),this.updatePrice(t),this.updateSKU(t),this.currentVariant=t,this.enableHistoryState)&&this.updateHistoryState(t)},updateHistoryState:function(t){var e;history.replaceState&&t&&((e=new URLSearchParams(window.location.search)).set("variant",t.id),history.replaceState(null,null,"?"+e.toString()))},updateSKU:function(t){t.sku!==this.currentVariant.sku&&this.container.dispatchEvent(new CustomEvent("variantSKUChange",{detail:{variant:t}}))},updatePrice:function(t){t.price===this.currentVariant.price&&t.compare_at_price===this.currentVariant.compare_at_price||this.container.dispatchEvent(new CustomEvent("variantPriceChange",{detail:{variant:t}}))},updateMedia:function(t){var e=t.featured_media||{},i=this.currentVariant.featured_media||{};let a=!1;e.preview_image&&i.preview_image&&(a=e.preview_image.src===i.preview_image.src),t.featured_media&&!a&&this.container.dispatchEvent(new CustomEvent("variantMediaChange",{detail:{variant:t}}))},updateMasterSelect:function(t){var e=this.container.querySelector(this.masterSelect);e.value=t.id,e.dispatchEvent(new Event("change"))}}),t}();