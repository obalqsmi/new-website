!function(){const n={productGridEnableHistoryState:{settings:window.themeVariables.settings,strings:window.themeVariables.strings}.settings.productGridEnableHistoryState};function t(){const r=document.querySelector(".dbtfy-product-swatches");var e;function d(e){const{groups:t,productId:d,swatchesSection:o,productSection:r,isCollection:n=!1,container:c}=e;var a;t&&(t.forEach(e=>{var t=e.querySelectorAll("li");let r=!1;t.forEach(e=>{var t,o;+e.dataset.productId===d&&(t=e.dataset.productOption,o=e.closest(".dbtfy-product-swatches__group")?.querySelector(".dbtfy-product-swatches__label"),r=!0,e.classList.add("active"),o)&&(o.innerHTML=t)}),(!r||t.length<=1)&&e.remove()}),e=r?.querySelector(".dbtfy-product-swatches-container"),(a=(n?c:e)?.querySelectorAll(".dbtfy-product-swatches"))&&a.forEach(e=>{e.remove()}),o.children.length)&&(e&&(e.insertAdjacentElement("afterbegin",o),e.removeAttribute("hidden"),o.removeAttribute("hidden")),n&&c&&(c.classList.contains("product-item__price-wrapper")?c.insertAdjacentElement("afterend",o):c.insertAdjacentElement("afterbegin",o),o.removeAttribute("hidden")),theme.helpers.loadComponent("imagesLazyloading",()=>{theme.imagesLazyLoading()}))}r&&(e=theme.helpers.safelyParseJson(r.dataset.sectionSettings))&&(n.showInProductGrid=e.showInProductGrid,document.querySelectorAll(".product.section").forEach(e=>{var t=+e.dataset.productId,o=r.cloneNode(!0);d({groups:o.querySelectorAll(".dbtfy-product-swatches__group"),productId:t,swatchesSection:o,productSection:e}),n.productGridEnableHistoryState||(t=window.location.pathname.split("?"),window.history.replaceState({},"",t[0]))}),n.showInProductGrid)&&document.querySelectorAll(".product-item:not(.product-item--empty-state)").forEach(e=>{var t=+e.dataset.productId,e=e.querySelector(".card__body .row, .product-item__content .product-item__price-wrapper"),o=r.cloneNode(!0);d({groups:o.querySelectorAll(".dbtfy-product-swatches__group"),productId:t,swatchesSection:o,isCollection:!0,container:e})})}t(),document.addEventListener("shopify:section:load",()=>{t()}),document.addEventListener("theme:section:product-recommendations:loaded",e=>{t()}),document.addEventListener("theme:addon:collection-filters:loaded",()=>{t()}),document.addEventListener("theme:addon:infinite-scroll:loaded",()=>{t()}),document.addEventListener("theme:addon:mega-menu:loaded",()=>{t()}),document.addEventListener("theme:addon:recently-viewed:loaded",()=>{t()})}();