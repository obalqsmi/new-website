!function(){var e={addon:window.themeVariables.settings.addons.cartFavicon,settings:window.themeVariables.settings,variables:window.themeVariables.variables};const a={faviconDefault:e.settings.faviconUrl,faviconCart:e.addon.icon,cartCount:e.variables.cart.itemCount,faviconCartError:e.addon.errorIcon,errorIconDuration:1e3*e.addon.errorIconDuration,iconBubbleStyle:e.addon.iconBubbleStyle,iconBubblePosition:e.addon.iconBubblePosition,iconBubbleBgColor:e.addon.iconBubbleBgColor,iconBubbleTextColor:e.addon.iconBubbleTextColor};function t(e){const o=e?e.item_count:a.cartCount;document.querySelectorAll(".favicon").forEach(e=>{if(a.faviconCart&&(0<o?e.setAttribute("href",a.faviconCart):e.setAttribute("href",a.faviconDefault)),a.faviconCart||a.faviconDefault)if(e=e,0<(t=o)){var d=e,s=t,u=a.iconBubbleStyle,f=a.iconBubblePosition,h=a.iconBubbleBgColor,b=a.iconBubbleTextColor;const v=document.createElement("img");v.crossOrigin="anonymous",v.src=a.faviconCart||a.faviconDefault,v.onload=()=>{var e=document.createElement("canvas"),t=e.getContext("2d"),o=v.width>v.height?v.width:v.height,a=(o-v.height)/2;e.width=o,e.height=o,t.drawImage(v,0,a);let i,n;var r=10,c=e.width/2,l=e.height/2,o=c/2,a=l/1.5;switch(f){case"top-left":i=r+c/2,n=r+l/2;break;case"top-right":i=e.width-r-c/2,n=r+l/2;break;case"bottom-left":i=r+c/2,n=e.height-r-l/2;break;case"bottom-right":i=e.width-r-c/2,n=e.height-r-l/2;break;default:i=e.width-r-c/2,n=r+l/2}t.beginPath(),t.fillStyle=h,"circle"===u?(t.arc(i,n,o,0,2*Math.PI),t.fill(),t.lineWidth=1,t.strokeStyle=h,t.stroke(),t.closePath()):"square"===u&&(t.fillRect(i-c/2,n-l/2,c,l),t.lineWidth=1,t.strokeStyle=h,t.strokeRect(i-c/2,n-l/2,c,l)),t.fillStyle=b,t.font=a+"px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(s,i,n);o=t.canvas.toDataURL();g(d,o,"image/x-icon")}}else g(e,a.faviconDefault,"image/png");var t})}function g(e,t,o){var a=document.querySelector("head"),i=document.createElement("link");i.sizes="192x192",i.type=o,i.rel="shortcut icon",i.href=t,i.classList.add("favicon"),e.remove(),a.appendChild(i)}a.faviconDefault&&(t(),document.addEventListener("theme:cart:loaded",e=>{t(e.detail.cart)}),document.addEventListener("theme:cart:loading-error",e=>{document.querySelectorAll(".favicon").forEach(e=>{a.faviconCartError&&(g(e,a.faviconCartError,"image/png"),setTimeout(()=>{g(e,a.faviconDefault||a.faviconCart,"image/png")},a.errorIconDuration))})}))}();